================================================================================
[01] Command - 1 (stress)
================================================================================
[01]
  Command - 1 (stress)
  
[内容]
  ## コマンド
    stress -q     // 起動メッセージ非表示
    stress -t XX  // タイムアウト(XX秒後)
    stress -c XX  // CPU負荷の子プロセスの生成数(XX個)
    stress -m XX  // メモリ負荷の子プロセスの生成数(XX個)
    stress -d XX  // HDD負荷の子プロセスの生成数(XX個)
    stress -t XX  // タイムアウト(XX秒後)
  
  ## 作業内容
    コマンドの動作確認を行う
  
[確認]
  # cd $HOME
  # yum -y install stress
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> リポジトリ「EPEL」のインストールが必要
  --------------------------------------------------
  
  # cd $HOME
  # vi sample.sh
  
  コマンドの実行結果
  --------------------------------------------------
  #!/bin/bash
  
  # CPU負荷1個、メモリ負荷1個、5秒後タイムアウト
  stress -c 1 -m 1 -t 5 &
  
  # 更新間隔1秒、更新回数9回、メガバイト単位
  vmstat 1 9 -S m
  --------------------------------------------------
  
  # cd $HOME
  # bash sample.sh
  
  コマンドの実行結果
  --------------------------------------------------
  // 負荷開始
  stress: info: [21295] dispatching hogs: 1 cpu, 0 io, 1 vm, 0 hdd
  
  // vmstat
  ## PROC ##  ######## Memory #########  ## Swap ##  ### IO ###  ## System ##  ###### CPU ######
     r  b     swpd   free   buff  cache   si    so     bi   bo     in     cs    us sy id wa st
     1  0      117   1278      0    768    0     0     50  336    251    236     8  2 90  0  0
     2  0      117   1185      0    770    0     0      0    0   2307    930    31 21 48  0  0
     2  0      117   1126      0    770    0     0      0    0   2278    929    30 21 49  0  0
     2  0      117   1102      0    770    0     0      0    0   2282   1037    30 21 49  0  0
     2  0      117   1225      0    770    0     0      0    0   2272    955    30 22 49  0  0
     1  0      117   1246      0    770    0     0      0    0   2265   1035    30 22 49  0  0
 
  // 負荷終了
  stress: info: [21295] successful run completed in 5s
  
  // vmstat -> PROC, CPU に変化あり
  ## PROC ##  ######## Memory #########  ## Swap ##  ### IO ###  ## System ##  ###### CPU ######
     r  b     swpd   free   buff  cache   si    so     bi   bo     in     cs    us sy id wa st
     0  0      117   1277      0    770    0     0      0   28    311    851     1  0 98  0  0
     0  0      117   1277      0    770    0     0      0    0    338    824     3  1 97  0  0
     0  0      117   1277      0    770    0     0      0  128    277    789     2  1 98  0  0
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
