================================================================================
[01] 総合的なリソース使用率の測定 - 01 (top)
[02] 総合的なリソース使用率の測定 - 02 (vmstat)
[03] 総合的なリソース使用率の測定 - 03 (vmstat)
[04] 総合的なリソース使用率の測定 - 04 (iostat)
[05] 総合的なリソース使用率の測定 - 05 (iotop)
[06] 総合的なリソース使用率の測定 - 06 (sysstat)
[07] 総合的なリソース使用率の測定 - 07 (sar)
[08] 総合的なリソース使用率の測定 - 08 (sar)
[09] 総合的なリソース使用率の測定 - 09 (sar)
[10] 総合的なリソース使用率の測定 - 10 (sar)
[11] 総合的なリソース使用率の測定 - 11 (sar)
[12] 総合的なリソース使用率の測定 - 12 (sar)
[13] 総合的なリソース使用率の測定 - 13 (sadf)
[14] 総合的なリソース使用率の測定 - 14 (uptime)
[15] 総合的なリソース使用率の測定 - 15 (w)
[16] CPU使用率の測定 - 01 (ps)
[17] CPU使用率の測定 - 02 (ps)
[18] CPU使用率の測定 - 03 (pstree)
[19] CPU使用率の測定 - 04 (lsof)
[20] メモリおよびスワップ使用量の測定 - 01 (free)
[21] メモリおよびスワップ使用量の測定 - 02 (cat /proc/meminfo)
[22] ディスク使用量の測定 - 01 (df)
[23] ディスク使用量の測定 - 02 (df)
[24] ネットワークトラフィックの測定 - 01 (netstat)
[25] ネットワークトラフィックの測定 - 02 (netstat)
[26] ネットワークトラフィックの測定 - 03 (ss)
[27] ネットワークトラフィックの測定 - 04 (ss)
[28] ネットワークトラフィックの測定 - 05 (netperf)
[29] ネットワークトラフィックの測定 - 06 (iptraf-ng)
================================================================================
[01]
  総合的なリソース使用率の測定 - 01 (top)
  
[内容]
  ## 作業内容
    プロセスをコマンド(top)で測定する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    top -b     // バッチモード
    top -d XX  // 更新間隔(XX 秒)
    top -n XX  // 更新回数(XX 回)を越えた後で自動的に終了
    top -u XX  // 指定ユーザーのプロセスのみ表示
    top -p XX  // 指定PIDのプロセスのみ表示
    top -w XX  // 出力幅(XX 桁数)
  
[確認]
  vm11$ cd $HOME
  vm11$ top -> 対話モード
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 対話モードは練習あるのみ！
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ vi script01.sh
  
  コマンドの実行結果
  --------------------------------------------------
  #!/bin/bash
  
  # 既存ログファイル削除
  if test -f script.log ; then
    rm -f script.log
  fi
  
  # 無限ループ
  while :(ヌルコマンド)
  do
    echo AAA >> script.log
    sleep 1  // プロセス内では「echo」より「sleep」の時間が圧倒的に長い
  done
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ bash script01.sh & (バックグラウンド実行)
  
  コマンドの実行結果
  --------------------------------------------------
  [1] 8002
  --------------------------------------------------
  
  vm11$ cd $HOME (バッチモード、ユーザー指定、更新間隔1秒、更新回数9回、出力幅100)
  vm11$ top -b -u makoto -d 1 -n 9 -w 100 | grep 8002
  
  コマンドの実行結果
  --------------------------------------------------
  PID  USER      PR  NI    VIRT    RES    SHR S %CPU %MEM   TIME+   COMMAND
  8002 makoto    20   0  113284   1384   1196 S  0.0  0.1   0:00.05 bash
  8002 makoto    20   0  113284   1384   1196 S  0.0  0.1   0:00.05 bash
  8002 makoto    20   0  113284   1384   1196 S  1.0  0.1   0:00.06 bash
  8002 makoto    20   0  113284   1384   1196 S  0.0  0.1   0:00.06 bash
  8002 makoto    20   0  113284   1384   1196 S  0.0  0.1   0:00.06 bash
  8002 makoto    20   0  113284   1384   1196 S  0.0  0.1   0:00.06 bash
  8002 makoto    20   0  113284   1384   1196 S  0.0  0.1   0:00.06 bash
  8002 makoto    20   0  113284   1384   1196 S  0.0  0.1   0:00.06 bash
  8002 makoto    20   0  113284   1384   1196 S  0.0  0.1   0:00.06 bash
  --------------------------------------------------
  
  vm11$ cd $HOME (バッチモード、PID指定、更新間隔1秒、更新回数9回)
  vm11$ top -b -p 8002 -d 1 -n 9 | grep 8002
  
  コマンドの実行結果
  --------------------------------------------------
  PID  USER      PR  NI    VIRT    RES    SHR S %CPU %MEM   TIME+   COMMAND
  8002 makoto    20   0  113284   1388   1196 S  0.0  0.1   0:00.18 bash
  8002 makoto    20   0  113284   1388   1196 S  0.0  0.1   0:00.18 bash
  8002 makoto    20   0  113284   1388   1196 S  0.0  0.1   0:00.18 bash
  8002 makoto    20   0  113284   1388   1196 S  0.0  0.1   0:00.18 bash
  8002 makoto    20   0  113284   1388   1196 S  0.0  0.1   0:00.18 bash
  8002 makoto    20   0  113284   1388   1196 S  0.0  0.1   0:00.18 bash
  8002 makoto    20   0  113284   1388   1196 S  0.0  0.1   0:00.18 bash
  8002 makoto    20   0  113284   1392   1196 S  0.0  0.1   0:00.18 bash
  8002 makoto    20   0  113284   1392   1196 S  1.0  0.1   0:00.19 bash
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ kill -term(15) 8002 (プロセス終了)
  
  コマンドの実行結果
  --------------------------------------------------
  [1]+  Terminated              bash script01.sh
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[02]
  総合的なリソース使用率の測定 - 02 (vmstat)
  
[内容]
  ## 作業内容
    CPU負荷をコマンド(vmstat)で測定する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    vmstat XX YY       // 更新間隔(XX秒)、更新回数(YY回)
    vmstat XX YY -S k  // 更新間隔(XX秒)、更新回数(YY回)、キロバイト単位
    vmstat XX YY -S m  // 更新間隔(XX秒)、更新回数(YY回)、メガバイト単位
  
[確認]
  vm11$ cd $HOME
  vm11$ sudo yum -y install epel-release (リポジトリのインストール)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> リポジトリ「EPEL」のインストール
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo yum -y install stress (コマンドのインストール)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ vi script02.sh
  
  コマンドの実行結果
  --------------------------------------------------
  #!/bin/bash
  
  # CPU負荷プロセス、5秒後タイムアウト、起動メッセージ非表示、バックグラウンド実行
  stress -c 1 -t 5 -q &
  
  # 更新間隔1秒、更新回数9回、メガバイト単位
  vmstat 1 9 -S m
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ bash script02.sh
  
  コマンドの実行結果
  --------------------------------------------------
  ## PROC ##  ######## Memory #########  ## Swap ##  ### IO ###  ## System ##  ###### CPU ######
     r  b     swpd   free   buff  cache   si   so     bi    bo     in   cs      us sy id wa st
     1  0        0    371      2    477    0    0     52    66     29   44       0  0 99  0  0
     1  0        0    371      2    477    0    0      0     0   1008   53      98  0  0  0  2  // CPU負荷
     1  0        0    371      2    477    0    0      0     0   1010   52     100  0  0  0  0  // CPU負荷
     1  0        0    371      2    477    0    0      0    19   1026   72     100  0  0  0  0  // CPU負荷
     2  0        0    371      2    477    0    0      0     0   1010   58     100  0  0  0  0  // CPU負荷
     0  0        0    371      2    477    0    0      0     0    975   63      94  0  6  0  0  // CPU負荷
     0  0        0    371      2    477    0    0      0     0     37   58       0  1 99  0  0
     0  0        0    371      2    477    0    0      0     0     32   52       1  0 99  0  0
     0  0        0    371      2    477    0    0      0     0     34   54       0  0 99  0  1
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[03]
  総合的なリソース使用率の測定 - 03 (vmstat)
  
[内容]
  ## 作業内容
    メモリ負荷をコマンド(vmstat)で測定する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    vmstat XX YY       // 更新間隔(XX秒)、更新回数(YY回)
    vmstat XX YY -S k  // 更新間隔(XX秒)、更新回数(YY回)、キロバイト単位
    vmstat XX YY -S m  // 更新間隔(XX秒)、更新回数(YY回)、メガバイト単位
  
[確認]
  vm11$ cd $HOME
  vm11$ vi script03.sh
  
  コマンドの実行結果
  --------------------------------------------------
  #!/bin/bash
  
  # メモリ負荷プロセス、5秒後タイムアウト、起動メッセージ非表示、バックグラウンド実行
  stress -m 1 -t 5 -q &
  
  # 更新間隔1秒、更新回数9回、メガバイト単位
  vmstat 1 9 -S m
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ bash script03.sh
  
  コマンドの実行結果
  --------------------------------------------------
  ## PROC ##  ######## Memory #########  ## Swap ##  ### IO ###  ## System ##  ###### CPU ######
     r  b     swpd   free   buff  cache   si   so     bi    bo     in   cs      us sy id wa st
     2  0        0    371      2    477    0    0     44    56     27   40       0  0 99  0  0
     1  0        0    112      2    477    0    0      0     0    812   76       4 91  2  0  2  // メモリ負荷
     1  0        0    131      2    477    0    0      0     0   1068  132       3 95  0  0  2  // メモリ負荷
     1  0        0    167      2    477    0    0      0     0   1052  129       6 92  0  0  2  // メモリ負荷
     1  0        0    171      2    477    0    0      0     0   1062  133       6 92  0  0  2  // メモリ負荷
     0  0        0    371      2    477    0    0      0     0   1024  136       5 91  3  0  2  // メモリ負荷
     0  0        0    371      2    477    0    0      0     0     12   10       1  0 99  0  0
     0  0        0    371      2    477    0    0      0     0     11   10       1  0 99  0  0
     0  0        0    371      2    477    0    0      0     0     17   17       1  0 99  0  0
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[04]
  総合的なリソース使用率の測定 - 04 (iostat)
  
[内容]
  ## 作業内容
    HDD負荷をコマンド(iostat)で測定する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    iostat -c     // CPU情報のみ出力
    iostat -d     // ディスクIOのみ出力
    iostat -k     // ブロック単位ではなくキロバイト単位
    iostat -m     // ブロック単位ではなくメガバイト単位
    iostat -t     // 時刻を表示
    iostat XX YY  // 更新間隔(XX秒)、更新回数(YY回)
  
[確認]
  vm11$ cd $HOME
  vm11$ sudo yum -y install sysstat (パッケージのインストール)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ lsblk (ディスク情報) -> デバイスマッピングが使われている
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  sr0                          11:0     1  1024M   0  rom   
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  vdb                         252:16    0     2G   0  disk  
   |-- vdb1                   252:17    0     1G   0  part  
   |-- vdb2                   252:18    0   975M   0  part  
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ ls -lh /dev/mapper (デバイスマッピング)
  
  コマンドの実行結果
  --------------------------------------------------
  lrwxrwxrwx. 1 root root       7  4月 15 18:17 centos_vm11-root -> ../dm-0  (/dev/dm-0)
  lrwxrwxrwx. 1 root root       7  4月 15 18:17 centos_vm11-swap -> ../dm-1  (/dev/dm-1)
  crw-------. 1 root root 10, 236  4月 15 18:17 control
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ vi script04.sh
  
  コマンドの実行結果
  --------------------------------------------------
  #!/bin/bash
  
  # HDD負荷プロセス、5秒後タイムアウト、起動メッセージ非表示、バックグラウンド実行
  stress -d 1 -t 5 -q &
  
  # 数秒待機
  sleep 1
  
  # 起動からの統計省略、メガバイト単位、ディスクIOのみ表示、更新間隔1秒、更新回数9回
  iostat -y -m -d 1 9
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ bash script04.sh
  
  コマンドの実行結果
  --------------------------------------------------
  Linux 3.10.0-1160.el7.x86_64 (vm11) 	2023年04月15日 	_x86_64_	(1 CPU)
  
  Device:            tps    MB_read/s    MB_wrtn/s    MB_read    MB_wrtn
  vda             150.00         0.00        73.68          0         28  // HDD負荷
  vdb               0.00         0.00         0.00          0          0
  dm-0 (root)     150.00         0.00        73.68          0         28  // HDD負荷
  dm-1 (swap)       0.00         0.00         0.00          0          0
  
  Device:            tps    MB_read/s    MB_wrtn/s    MB_read    MB_wrtn
  vda            1021.82         0.00       509.09          0        280  // HDD負荷
  vdb               0.00         0.00         0.00          0          0
  dm-0 (root)    1021.82         0.00       509.09          0        280  // HDD負荷
  dm-1 (swap)       0.00         0.00         0.00          0          0
  
  Device:            tps    MB_read/s    MB_wrtn/s    MB_read    MB_wrtn
  vda            1788.89         0.03       893.52          0        482  // HDD負荷
  vdb               0.00         0.00         0.00          0          0
  dm-0 (root)    1974.07         0.03       985.19          0        532  // HDD負荷
  dm-1 (swap)       0.00         0.00         0.00          0          0
  
  Device:            tps    MB_read/s    MB_wrtn/s    MB_read    MB_wrtn
  vda             487.50         0.00       242.61          0        213  // HDD負荷
  vdb               0.00         0.00         0.00          0          0
  dm-0 (root)     446.59         0.00       222.73          0        196  // HDD負荷
  dm-1 (swap)       0.00         0.00         0.00          0          0
  
  Device:            tps    MB_read/s    MB_wrtn/s    MB_read    MB_wrtn
  vda              66.67         0.00        33.33          0         32  // HDD負荷
  vdb               0.00         0.00         0.00          0          0
  dm-0 (root)       0.00         0.00         0.00          0          0  // HDD負荷
  dm-1 (swap)       0.00         0.00         0.00          0          0
  
  Device:            tps    MB_read/s    MB_wrtn/s    MB_read    MB_wrtn
  vda               0.00         0.00         0.00          0          0
  vdb               0.00         0.00         0.00          0          0
  dm-0 (root)       0.00         0.00         0.00          0          0
  dm-1 (swap)       0.00         0.00         0.00          0          0
  
  Device:            tps    MB_read/s    MB_wrtn/s    MB_read    MB_wrtn
  vda               0.00         0.00         0.00          0          0
  vdb               0.00         0.00         0.00          0          0
  dm-0 (root)       0.00         0.00         0.00          0          0
  dm-1 (swap)       0.00         0.00         0.00          0          0
  
  Device:            tps    MB_read/s    MB_wrtn/s    MB_read    MB_wrtn
  vda               0.00         0.00         0.00          0          0
  vdb               0.00         0.00         0.00          0          0
  dm-0 (root)       0.00         0.00         0.00          0          0
  dm-1 (swap)       0.00         0.00         0.00          0          0
  
  Device:            tps    MB_read/s    MB_wrtn/s    MB_read    MB_wrtn
  vda               0.00         0.00         0.00          0          0
  vdb               0.00         0.00         0.00          0          0
  dm-0 (root)       0.00         0.00         0.00          0          0
  dm-1 (swap)       0.00         0.00         0.00          0          0
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[05]
  総合的なリソース使用率の測定 - 05 (iotop)
  
[内容]
  ## 作業内容
    プロセスをコマンド(iotop)で測定する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    iotop -b     // 対話モードでなくバッチモード
    iotop -d XX  // 更新間隔(XX 秒)
    iotop -n XX  // 更新回数(XX 回)を越えた後で自動的に終了
    iotop -u XX  // 指定ユーザーのプロセスのみ表示
    iotop -p XX  // 指定PIDのプロセスのみ表示
  
[確認]
  vm11$ cd $HOME
  vm11$ sudo yum -y install iotop (コマンドのインストール)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo iotop -> 対話モード、root権限が必要
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 対話モードは練習あるのみ！
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ bash script01.sh & (バックグラウンド実行)
  
  コマンドの実行結果
  --------------------------------------------------
  [1] 16205
  --------------------------------------------------
  
  vm11$ cd $HOME (バッチモード、ユーザー指定、更新間隔1秒、更新回数9回)
  vm11$ sudo iotop -b -u makoto -d 1 -n 9 | grep 16205 | grep -v grep
  
  コマンドの実行結果
  --------------------------------------------------
  TID    PRIO  USER    DISK-READ  DISK-WRITE  SWAPIN  IO      COMMAND
  16205  be/4  makoto  0.00 B/s   0.00 B/s    0.00 %  0.00 %  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    0.00 %  0.00 %  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    0.00 %  0.00 %  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    0.00 %  0.00 %  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    0.00 %  0.00 %  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    0.00 %  0.00 %  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    0.00 %  0.00 %  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    0.00 %  0.00 %  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    0.00 %  0.00 %  bash script01.sh
  --------------------------------------------------
  
  vm11$ cd $HOME (バッチモード、PID指定、更新間隔1秒、更新回数9回)
  vm11$ sudo iotop -b -p 16205 -d 1 -n 9 | grep 16205 | grep -v grep
  
  コマンドの実行結果
  --------------------------------------------------
  TID    PRIO  USER    DISK-READ  DISK-WRITE  SWAPIN  IO     COMMAND
  16205  be/4  makoto  0.00 B/s   0.00 B/s    ?unavailable?  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    ?unavailable?  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    ?unavailable?  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    ?unavailable?  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    ?unavailable?  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    ?unavailable?  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    ?unavailable?  bash script01.sh
  16205  be/4  makoto  0.00 B/s   0.00 B/s    ?unavailable?  bash script01.sh
  16205  be/4  makoto  0.00 B/s   3.99 K/s    ?unavailable?  bash script01.sh
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ kill -term(15) 16205 (プロセス終了)
  
  コマンドの実行結果
  --------------------------------------------------
  [1]+  Terminated              bash script01.sh
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[06]
  総合的なリソース使用率の測定 - 06 (sysstat)
  
[内容]
  ## 作業内容
    パッケージ「sysstat」の調査を行う
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## 調査内容
    /etc/sysconfig/sysstat  // 設定ファイル
    /etc/cron.d/sysstat     // CRON
    /var/log/sa/saXX        // 収集データの格納先
    sar                     // コマンド - 収集データのレポート作成
    sadf                    // コマンド - 収集データのレポート書式変更
  
[確認]
  vm11$ cd $HOME
  vm11$ yum list installed | grep sysstat
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> パッケージのインストール確認
  --------------------------------------------------
  
  vm11$ cd /etc/sysconfig
  vm11$ cat sysstat | grep -vE '^#|^$' (設定ファイル)
  
  コマンドの実行結果
  --------------------------------------------------
  HISTORY=28              // デフォルトで28日保存
  COMPRESSAFTER=31        // 31日経過で圧縮
  SADC_OPTIONS="-S DISK"  // データ収集コマンドのオプション設定
  ZIP="bzip2"             // 圧縮形式
  --------------------------------------------------
  
  vm11$ cd /etc/cron.d
  vm11$ sudo grep -vE '^#|^$' sysstat (CRON設定ファイル)
  
  コマンドの実行結果
  --------------------------------------------------
  */10 *  *  *  *  root  /usr/lib64/sa/sa1 1 1  // 10分毎に「sa1 1 1」実行
  53   23 *  *  *  root  /usr/lib64/sa/sa2 -A   // 毎日23時53分に「sa2 -A」で一日分の集計処理
  --------------------------------------------------
  
  vm11$ cd /var/log/sa
  vm11$ ls -lh (収集データ)
  
  コマンドの実行結果
  --------------------------------------------------
  -rw-r--r--. 1 root root 13K  4月 15 20:30 sa15
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ which sar (コマンド確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /bin/sar
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ which sadf (コマンド確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /bin/sadf
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[07]
  総合的なリソース使用率の測定 - 07 (sar)
  
[内容]
  ## 作業内容
    収集データからCPU統計のレポートを作成
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    sar XX YY       // 更新間隔(XX秒)、更新回数(YY回)
    sar -o XX       // 出力ファイル(XX)を指定
    sar -u          // CPU
    sar -r          // メモリ
    sar -W          // スワップ
    sar -b          // ディスクIO
    sar -n DEV      // NIC
    sar -n EDEV     // NICエラー
    sar -f XX       // ログファイル(XX)を指定
    sar -s XX -e YY // 時刻XX(HH:MM:SS)から時刻YY(HH:MM:SS)を指定
  
[確認]
  vm11$ cd /var/log/sa
  vm11$ ls -lh (収集データ確認)
  
  コマンドの実行結果
  --------------------------------------------------
  -rw-r--r--. 1 root root 13K  4月 15 20:30 sa15
  --------------------------------------------------
  
  vm11$ cd $HOME (CPU統計、収集データ(15日)、19:40開始、20:40終了、20分(1200秒)単位)
  vm11$ LANG=C sar -u -f /var/log/sa/sa15 -s 19:40:00 -e 20:40:00 1200
  
  コマンドの実行結果
  --------------------------------------------------
  Linux 3.10.0-1160.el7.x86_64 (vm11) 04/15/23 _x86_64_ (1 CPU)
  
  19:50:01        CPU     %user     %nice   %system   %iowait    %steal     %idle
  20:10:01        all      0.12      0.00      0.28      0.08      0.06     99.46
  20:30:02        all      0.09      0.00      0.19      0.00      0.11     99.61
  Average:        all      0.10      0.00      0.24      0.04      0.08     99.53
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[08]
  総合的なリソース使用率の測定 - 08 (sar)
  
[内容]
  ## 作業内容
    収集データからメモリ統計のレポートを作成
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    sar XX YY       // 更新間隔(XX秒)、更新回数(YY回)
    sar -o XX       // 出力ファイル(XX)を指定
    sar -u          // CPU
    sar -r          // メモリ
    sar -W          // スワップ
    sar -b          // ディスクIO
    sar -n DEV      // NIC
    sar -n EDEV     // NICエラー
    sar -f XX       // ログファイル(XX)を指定
    sar -s XX -e YY // 時刻XX(HH:MM:SS)から時刻YY(HH:MM:SS)を指定
  
[確認]
  vm11$ cd /var/log/sa
  vm11$ ls -lh (収集データ確認)
  
  コマンドの実行結果
  --------------------------------------------------
  -rw-r--r--. 1 root root 16K  4月 15 20:40 sa15
  --------------------------------------------------
  
  vm11$ cd $HOME (メモリ統計、収集データ(15日)、19:40開始、20:40終了、20分(1200秒)単位)
  vm11$ LANG=C sar -r -f /var/log/sa/sa15 -s 19:40:00 -e 20:40:00 1200
  
  コマンドの実行結果
  --------------------------------------------------
  Linux 3.10.0-1160.el7.x86_64 (vm11) 04/15/23 _x86_64_ (1 CPU)
  
  19:50:01   kbmemfree  kbmemused  %memused  kbbuffers  kbcached  kbcommit  %commit  kbactive  kbinact  kbdirty
  20:10:01      425680     587776     58.00       2104    367108    284756     9.15    373528    58720        4
  20:30:02      426472     586984     57.92       2104    367216    283440     9.11    373056    58724        0
  Average:      426076     587380     57.96       2104    367162    284098     9.13    373292    58722        2
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[09]
  総合的なリソース使用率の測定 - 09 (sar)
  
[内容]
  ## 作業内容
    収集データからスワップ統計のレポートを作成
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    sar XX YY       // 更新間隔(XX秒)、更新回数(YY回)
    sar -o XX       // 出力ファイル(XX)を指定
    sar -u          // CPU
    sar -r          // メモリ
    sar -W          // スワップ
    sar -b          // ディスクIO
    sar -n DEV      // NIC
    sar -n EDEV     // NICエラー
    sar -f XX       // ログファイル(XX)を指定
    sar -s XX -e YY // 時刻XX(HH:MM:SS)から時刻YY(HH:MM:SS)を指定
  
[確認]
  vm11$ cd /var/log/sa
  vm11$ ls -lh (収集データ確認)
  
  コマンドの実行結果
  --------------------------------------------------
  -rw-r--r--. 1 root root 18K  4月 15 20:50 sa15
  --------------------------------------------------
  
  vm11$ cd $HOME (スワップ統計、収集データ(15日)、19:40開始、20:40終了、20分(1200秒)単位)
  vm11$ LANG=C sar -W -f /var/log/sa/sa15 -s 19:40:00 -e 20:40:00 1200
  
  コマンドの実行結果
  --------------------------------------------------
  Linux 3.10.0-1160.el7.x86_64 (vm11) 04/15/23 _x86_64_ (1 CPU)
  
  19:50:01  pswpin/s  pswpout/s
  20:10:01      0.00       0.00
  20:30:02      0.00       0.00
  Average:      0.00       0.00
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[10]
  総合的なリソース使用率の測定 - 10 (sar)
  
[内容]
  ## 作業内容
    収集データからディスクIO統計のレポートを作成
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    sar XX YY       // 更新間隔(XX秒)、更新回数(YY回)
    sar -o XX       // 出力ファイル(XX)を指定
    sar -u          // CPU
    sar -r          // メモリ
    sar -W          // スワップ
    sar -b          // ディスクIO
    sar -n DEV      // NIC
    sar -n EDEV     // NICエラー
    sar -f XX       // ログファイル(XX)を指定
    sar -s XX -e YY // 時刻XX(HH:MM:SS)から時刻YY(HH:MM:SS)を指定
  
[確認]
  vm11$ cd /var/log/sa
  vm11$ ls -lh (収集データ確認)
  
  コマンドの実行結果
  --------------------------------------------------
  -rw-r--r--. 1 root root 21K  4月 15 21:00 sa15
  --------------------------------------------------
  
  vm11$ cd $HOME (ディスクIO統計、収集データ(15日)、19:40開始、20:40終了、20分(1200秒)単位)
  vm11$ LANG=C sar -b -f /var/log/sa/sa15 -s 19:40:00 -e 20:40:00 1200
  
  コマンドの実行結果
  --------------------------------------------------
  Linux 3.10.0-1160.el7.x86_64 (vm11) 04/15/23 _x86_64_ (1 CPU)
  
  19:50:01       tps      rtps      wtps   bread/s   bwrtn/s
  20:10:01      3.05      0.52      2.53     37.89   2228.68
  20:30:02      0.16      0.00      0.15      0.13      1.30
  Average:      1.60      0.26      1.34     19.00   1114.45
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[11]
  総合的なリソース使用率の測定 - 11 (sar)
  
[内容]
  ## 作業内容
    収集データからネットワーク統計のレポートを作成
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    sar XX YY       // 更新間隔(XX秒)、更新回数(YY回)
    sar -o XX       // 出力ファイル(XX)を指定
    sar -u          // CPU
    sar -r          // メモリ
    sar -W          // スワップ
    sar -b          // ディスクIO
    sar -n DEV      // NIC
    sar -n EDEV     // NICエラー
    sar -f XX       // ログファイル(XX)を指定
    sar -s XX -e YY // 時刻XX(HH:MM:SS)から時刻YY(HH:MM:SS)を指定
  
[確認]
  vm11$ cd /var/log/sa
  vm11$ ls -lh (収集データ確認)
  
  コマンドの実行結果
  --------------------------------------------------
  -rw-r--r--. 1 root root 23K  4月 15 21:10 sa15
  --------------------------------------------------
  
  vm11$ cd $HOME (ネットワーク統計、収集データ(15日)、19:40開始、20:40終了、20分(1200秒)単位)
  vm11$ LANG=C sar -n DEV -f /var/log/sa/sa15 -s 19:40:00 -e 20:40:00 1200
  
  コマンドの実行結果
  --------------------------------------------------
  Linux 3.10.0-1160.el7.x86_64 (vm11) 04/15/23 _x86_64_ (1 CPU)
  
  19:50:01     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s
  20:10:01      eth0      0.78      0.37      0.10      0.03      0.00      0.00      0.00
  20:10:01        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
  20:30:02      eth0      0.54      0.01      0.03      0.00      0.00      0.00      0.00
  20:30:02        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
  Average:      eth0      0.66      0.19      0.06      0.01      0.00      0.00      0.00
  Average:        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[12]
  総合的なリソース使用率の測定 - 12 (sar)
  
[内容]
  ## 作業内容
    収集データからネットワークエラー統計のレポートを作成
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    sar XX YY       // 更新間隔(XX秒)、更新回数(YY回)
    sar -o XX       // 出力ファイル(XX)を指定
    sar -u          // CPU
    sar -r          // メモリ
    sar -W          // スワップ
    sar -b          // ディスクIO
    sar -n DEV      // NIC
    sar -n EDEV     // NICエラー
    sar -f XX       // ログファイル(XX)を指定
    sar -s XX -e YY // 時刻XX(HH:MM:SS)から時刻YY(HH:MM:SS)を指定
  
[確認]
  vm11$ cd /var/log/sa
  vm11$ ls -lh (収集データ確認)
  
  コマンドの実行結果
  --------------------------------------------------
  -rw-r--r--. 1 root root 23K  4月 15 21:10 sa15
  --------------------------------------------------
  
  vm11$ cd $HOME (ネットワークエラー統計、収集データ(15日)、19:40開始、20:40終了、20分(1200秒)単位)
  vm11$ LANG=C sar -n EDEV -f /var/log/sa/sa15 -s 19:40:00 -e 20:40:00 1200
  
  コマンドの実行結果
  --------------------------------------------------
  Linux 3.10.0-1160.el7.x86_64 (vm11) 04/15/23 _x86_64_ (1 CPU)
  
  19:50:01     IFACE   rxerr/s   txerr/s    coll/s  rxdrop/s  txdrop/s  txcarr/s  rxfram/s  rxfifo/s  txfifo/s
  20:10:01      eth0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
  20:10:01        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
  20:30:02      eth0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
  20:30:02        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
  Average:      eth0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
  Average:        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[13]
  総合的なリソース使用率の測定 - 13 (sadf)
  
[内容]
  ## 作業内容
    収集データからネットワーク統計のレポートをJSON形式で作成
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    sadf -j -- sarコマンド  // JSON形式 -> ログファイル指定時に「-f」を使用したらエラー
    sadf -x -- sarコマンド  // XML形式  -> ログファイル指定時に「-f」を使用したらエラー
    sadf -t                 // ローカル日時
  
[確認]
  vm11$ cd /var/log/sa
  vm11$ ls -lh (収集データ確認)
  
  コマンドの実行結果
  --------------------------------------------------
  -rw-r--r--. 1 root root 26K  4月 15 21:20 sa15
  --------------------------------------------------
  
  vm11$ cd $HOME (JSON出力、ローカル時刻、収集データ(15日)、ネットワーク統計、19:40開始、20:40終了、20分(1200秒)単位)
  vm11$ sadf -jt /var/log/sa/sa15 -- -n DEV -s 19:40:00 -e 20:40:00 1200
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> JSON出力を確認
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[14]
  総合的なリソース使用率の測定 - 14 (uptime)
  
[内容]
  ## 作業内容
    システム稼働時間、ログインユーザー数、平均負荷を観察する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    uptime
  
[確認]
  vm11$ cd $HOME
  vm11$ uptime
  
  コマンドの実行結果
  --------------------------------------------------
  21:23:37 up  3:11,  1 user,  load average: 0.00, 0.01, 0.05
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[15]
  総合的なリソース使用率の測定 - 15 (w)
  
[内容]
  ## 作業内容
    指定ユーザー(makoto)のプロセス情報を出力
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    w XX     // ユーザー(XX)のプロセス情報を出力
    w -h XX  // ヘッダを非表示
    w -s XX  // ログイン時刻、JCPU、PCPUを非表示
  
  ## 項目説明
    TTY    : 端末名
    FROM   : リモートホスト名
    LOGIN@ : ログイン時刻
    IDLE   : アイドル時間
    JCPU   : 端末から実行されている全プロセスが消費したCPU時間
    PCPU   : WHAT欄のプロセスが消費したCPU時間
    WHAT   : 実行コマンド
  
[確認]
  vm11$ cd $HOME
  vm11$ systemctl is-active sshd
  
  コマンドの実行結果
  --------------------------------------------------
  active
  --------------------------------------------------
    
    $ cd $HOME
    $ ssh makoto@192.168.122.11 (ホスト側から仮想マシンにログイン)
    
    コマンドの実行結果
    --------------------------------------------------
    (省略)
    --------------------------------------------------
    
  vm11$ cd $HOME
  vm11$ w
  
  コマンドの実行結果
  --------------------------------------------------
  21:28:27 up  3:16,  2 users,  load average: 0.00, 0.01, 0.05
  
  USER     TTY     FROM      LOGIN@   IDLE     JCPU    PCPU    WHAT
  makoto   ttyS0             18:12    3.00s    1.42s   0.01s   w
  makoto   pts/0   gateway   21:27    32.00s   0.02s   0.02s   -bash
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[16]
  CPU使用率の測定 - 01 (ps)
  
[内容]
  ## 作業内容
    プロセスをコマンド(ps)で測定する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    ps a      // 端末上の全プロセス表示
    ps u      // 実行ユーザー表示
    ps x      // 制御端末を持たないプロセスも表示
    ps e      // 環境変数も表示
    ps r      // 実行中プロセスのみ表示
    ps l      // 長フォーマット
    ps -e     // 全プロセス表示
    ps -f     // 引数も含めた完全フォーマットで表示
    ps -l     // 長フォーマット
    ps -p XX  // XX(PID)を指定
    ps -u XX  // XX(UID)を指定
  
  ## 項目説明
    PID     : プロセスID
    PPID    : 親プロセスのPID
    %CPU    : CPU使用率
    %MEM    : メモリ使用率
    VSZ     : プロセスが使用するメモリ量
    RSS     : 現時点で使用中のメモリ量
    TTY     : 制御端末名
    STAT    : プロセス状態(S:スリープ、D:割込不可、R:実行状態、T:トレースまたは停止、Z:消滅状態、W:スワップアウト)
    START   : 実行開始時刻
    TIME    : 消費したCPU時間
    COMMAND : 実行コマンド
  
[確認]
  vm11$ cd $HOME
  vm11$ bash script01.sh & (バックグラウンド実行)
  
  コマンドの実行結果
  --------------------------------------------------
  [1] 17508
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ ps aux | grep script01 | grep -v grep (プロセスを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  USER       PID  %CPU  %MEM     VSZ   RSS  TTY    STAT  START  TIME  COMMAND
  makoto   17508  0.0   0.1   113284  1384  ttyS0  S     21:34  0:00  bash script01.sh
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ kill -term(15) 17508 (プロセス終了)
  
  コマンドの実行結果
  --------------------------------------------------
  [1]+  Terminated              bash script01.sh
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[17]
  CPU使用率の測定 - 02 (ps)
  
[内容]
  ## 作業内容
    プロセスをコマンド(ps)で測定する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    ps a      // 端末上の全プロセス表示
    ps u      // 実行ユーザー表示
    ps x      // 制御端末を持たないプロセスも表示
    ps e      // 環境変数も表示
    ps r      // 実行中プロセスのみ表示
    ps l      // 長フォーマット
    ps -e     // 全プロセス表示
    ps -f     // 引数も含めた完全フォーマットで表示
    ps -l     // 長フォーマット
    ps -p XX  // XX(PID)を指定
    ps -u XX  // XX(UID)を指定
  
  ## 項目説明
    PID     : プロセスID
    PPID    : 親プロセスのPID
    %CPU    : CPU使用率
    %MEM    : メモリ使用率
    VSZ     : プロセスが使用するメモリ量
    RSS     : 現時点で使用中のメモリ量
    TTY     : 制御端末名
    STAT    : プロセス状態(S:スリープ、D:割込不可、R:実行状態、T:トレースまたは停止、Z:消滅状態、W:スワップアウト)
    START   : 実行開始時刻
    TIME    : 消費したCPU時間
    COMMAND : 実行コマンド
  
[確認]
  vm11$ cd $HOME
  vm11$ bash script01.sh & (バックグラウンド実行)
  
  コマンドの実行結果
  --------------------------------------------------
  [1] 1490
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ ps -ef | grep script01 | grep -v grep (プロセスを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  UID     PID   PPID  C  STIME  TTY    TIME      CMD
  makoto  1490  1468  0  06:38  ttyS0  00:00:00  bash script01.sh
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ kill -term(15) 1490 (プロセス終了)
  
  コマンドの実行結果
  --------------------------------------------------
  [1]+  Terminated              bash script01.sh
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[18]
  CPU使用率の測定 - 03 (pstree)
  
[内容]
  ## 作業内容
    プロセスの親子関係をコマンド(pstree)で確認する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド ##
    pstree XX  // PID(XX)の親子関係をツリー状で表示
    pstree -l  // 長フォーマット
    pstree -p  // PID表示
  
[確認]
  vm11$ cd $HOME
  vm11$ sudo yum -y install psmisc (コマンドのインストール)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ ps -ef | grep -i NetworkManager (NetworkManagerのPID)
  
  コマンドの実行結果
  --------------------------------------------------
  UID   PID  PPID  C  STIME  TTY  TIME      CMD
  root  669  1     0  06:37  ?    00:00:00  /usr/sbin/NetworkManager --no-daemon
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ pstree -p 669 (PID表示、プロセスの親子関係)
  
  コマンドの実行結果
  --------------------------------------------------
  NetworkManager(669)-------{NetworkManager}(676)
                        |---{NetworkManager}(680)
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[19]
  CPU使用率の測定 - 04 (lsof)
  
[内容]
  ## 作業内容
    ネットワーク通信をコマンド(lsof)で測定する
  
  ## 使用マシン
    HOST : localhost
    IPV4 : 192.168.1.3
    MEMO : ホスト
  
  ## コマンド
    lsof        // プロセス情報をリスト表示
    lsof -c XX  // コマンド(XX)に一致するプロセスのみ表示
    lsof -i:XX  // ポート番号(XX)へ通信しているプロセスのみ表示
    lsof -n     // DNS名前解決を行わない
    lsof -p XX  // PID(XX)のプロセスのみ表示
    lsof -u XX  // UID(XX)のプロセスのみ表示
  
[確認]
  $ cd $HOME
  $ sudo yum -y install lsof (コマンドのインストール)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  $ cd $HOME
  $ lsof -i:https -n (HTTPS通信を測定)
  
  コマンドの実行結果
  --------------------------------------------------
  COMMAND   PID    USER    FD  TYPE  DEVICE  SIZE/OFF  NODE  NAME
  code     3368  makoto   42u  IPV4  301529       0t0   TCP  192.168.1.3:38862 -> 40.77.226.250:https (SYN_SENT)
  firefox  3563  makoto   49u  IPV4  301406       0t0   TCP  192.168.1.3:41428 -> 133.152.62.71:https (ESTABLISHED)
  firefox  3563  makoto   53u  IPV4  263699       0t0   TCP  192.168.1.3:55368 -> 133.152.42.207:https (ESTABLISHED)
  firefox  3563  makoto  103u  IPV4   46986       0t0   TCP  192.168.1.3:51332 -> 52.35.145.245:https (ESTABLISHED)
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[20]
  メモリおよびスワップ使用量の測定 - 01 (free)
  
[内容]
  ## 作業内容
    メモリとスワップの使用量を確認する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド
    free        // メモリとスワップの情報を表示
    free -b     // バイト単位で表示
    free -k     // キロバイト単位で表示
    free -m     // メガバイト単位で表示
    free -t     // 物理メモリとスワップの合計行も表示
    free -s XX  // 更新間隔(XX)を指定
    free -c XX  // 更新回数(XX)を指定
  
[確認]
  vm11$ cd $HOME
  vm11$ free -m (メガバイト単位)
  
  コマンドの実行結果
  --------------------------------------------------
                total        used        free      shared  buff/cache   available
  Mem:            989         176         558           8         254         665
  Swap:          2047           0        2047
  
  // total(989) = used(176) + buff/cache(254) + free(558) -> used(176)以外からavailable(665)を捻出
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[21]
  メモリおよびスワップ使用量の測定 - 02 (cat /proc/meminfo)
  
[内容]
  ## 作業内容
    メモリ容量をコマンド(cat /proc/meminfo)で測定する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
[確認]
  vm12$ cd $HOME
  vm12$ cat /proc/meminfo
  
  コマンドの実行結果
  --------------------------------------------------
  MemTotal:        1014676 kB
  MemFree:          470024 kB
  MemAvailable:     710576 kB
  Buffers:             164 kB
  Cached:           357136 kB
  SwapCached:            0 kB
  Active:           352548 kB
  Inactive:          65288 kB
  Active(anon):      33032 kB
  Inactive(anon):    34340 kB
  Active(file):     319516 kB
  Inactive(file):    30948 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       1048572 kB
  SwapFree:        1048572 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:         60568 kB
  Mapped:            21676 kB
  Shmem:              6836 kB
  Slab:              63216 kB
  SReclaimable:      35728 kB
  SUnreclaim:        27488 kB
  KernelStack:        1792 kB
  PageTables:         3556 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:     1555908 kB
  Committed_AS:     271108 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:      268044 kB
  VmallocChunk:   34358947836 kB
  Percpu:              176 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:      6144 kB
  CmaTotal:              0 kB
  CmaFree:               0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  DirectMap4k:       57200 kB
  DirectMap2M:      991232 kB
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[22]
  ディスク使用量の測定 - 01 (df)
  
[内容]
  ## 作業内容
    ディスク使用量をコマンド(df)で測定する
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド
    df     // ディスク使用量の表示
    df -a  // 全ファイルシステムのディスク使用量を表示
    df -h  // 1MB=1024KB
    df -H  // 1MB=1000KB
    df -i  // iノードの使用状況
    df -m  // メガバイト単位で表示
    df -T  // ファイルシステムタイプを表示
  
[確認]
  vm12$ cd $HOME
  vm12$ LANG=C df -mT (メガバイト単位、ファイルシステムタイプ表示)
  
  コマンドの実行結果
  --------------------------------------------------
  Filesystem                    Type      1M-blocks   Used  Available  Use%  Mounted on
  devtmpfs                      devtmpfs        484      0        484    0%  /dev
  tmpfs                         tmpfs           496      0        496    0%  /dev/shm
  tmpfs                         tmpfs           496      7        489    2%  /run
  tmpfs                         tmpfs           496      0        496    0%  /sys/fs/cgroup
  /dev/mapper/centos_vm11-root  xfs            8178   1470       6709   18%  /
  /dev/vda1                     xfs            1014    137        878   14%  /boot
  tmpfs                         tmpfs           100      0        100    0%  /run/user/1000
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[23]
  ディスク使用量の測定 - 02 (df)
  
[内容]
  ## 作業内容
    iノード使用状況をコマンド(df)で測定する
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド
    df     // ディスク使用量の表示
    df -a  // 全ファイルシステムのディスク使用量を表示
    df -h  // 1MB=1024KB
    df -H  // 1MB=1000KB
    df -i  // iノードの使用状況
    df -m  // メガバイト単位で表示
    df -T  // ファイルシステムタイプを表示
  
[確認]
  vm12$ cd $HOME
  vm12$ LANG=C df -iT (iノードの使用状況、ファイルシステムタイプ表示)
  
  コマンドの実行結果
  --------------------------------------------------
  Filesystem                    Type      Inodes  IUsed    IFree  IUse%  Mounted on
  devtmpfs                      devtmpfs  123903    343   123560     1%  /dev
  tmpfs                         tmpfs     126834      1   126833     1%  /dev/shm
  tmpfs                         tmpfs     126834    436   126398     1%  /run
  tmpfs                         tmpfs     126834     16   126818     1%  /sys/fs/cgroup
  /dev/mapper/centos_vm11-root  xfs      4192256  27610  4164646     1%  /
  /dev/vda1                     xfs       524288    326   523962     1%  /boot
  tmpfs                         tmpfs     126834      1   126833     1%  /run/user/1000
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[24]
  ネットワークトラフィックの測定 - 01 (netstat)
  
[内容]
  ## 作業内容
    NIC情報をコマンド(netstat)で測定する
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド
    netstat -i     // 全NIC情報を出力
    netstat -I=XX  // NIC(XX)の情報を出力
    netstat -s     // プロトコル毎の統計情報
  
[確認]
  vm12$ cd $HOME
  vm12$ sudo yum -y install net-tools (コマンドのインストール)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ netstat -i
  
  コマンドの実行結果
  --------------------------------------------------
  Kernel Interface table
  Iface      MTU    RX-OK    RX-ERR    RX-DRP    RX-OVR    TX-OK    TX-ERR    TX-DRP    TX-OVR     Flg
  eth0      1500    19378         0        13         0     1235         0         0         0    BMRU
  lo       65536       32         0         0         0       32         0         0         0     LRU
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ netstat -I=eth0
  
  コマンドの実行結果
  --------------------------------------------------
  Kernel Interface table
  Iface      MTU    RX-OK    RX-ERR    RX-DRP    RX-OVR    TX-OK    TX-ERR    TX-DRP    TX-OVR     Flg
  eth0      1500    19706         0        13         0     1239         0         0         0    BMRU
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[25]
  ネットワークトラフィックの測定 - 02 (netstat)
  
[内容]
  ## 作業内容
    プロトコル毎の統計情報をコマンド(netstat)で測定する
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド
    netstat -i     // 全NIC情報を出力
    netstat -I=XX  // NIC(XX)の情報を出力
    netstat -s     // プロトコル毎の統計情報
  
[確認]
  vm12$ cd $HOME
  vm12$ netstat -s
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> IP, ICMP, TCP, UDP ... の統計情報を確認した
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[26]
  ネットワークトラフィックの測定 - 03 (ss)
  
[内容]
  ## 作業内容
    TCP接続とUDP接続を表示
  
  ## 使用マシン
    HOST : localhost(Rocky-Linux)
    IPV4 : 192.168.1.4
    MEMO : ホスト
  
  ## コマンド
    ss -t  // TCP接続を表示
    ss -u  // UDP接続を表示
    ss -s  // 統計情報を表示
  
[確認]
  $ cd $HOME
  $ ss -t (TCP接続)
  
  コマンドの実行結果
  --------------------------------------------------
  State    Recv-Q    Send-Q    Local Address:Port    Peer Address:Port                
  ESTAB    0         0         192.168.1.3:51332     52.35.145.245:https                
  ESTAB    0         0         192.168.1.3:57674     133.152.42.207:https                
  ESTAB    0         0         192.168.1.3:50576     133.152.40.171:https  
  --------------------------------------------------
  
  $ cd $HOME
  $ ss -u (UDP接続)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 列見出しのみ出力、該当データなし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[27]
  ネットワークトラフィックの測定 - 04 (ss)
  
[内容]
  ## 作業内容
    接続状態の統計を表示
  
  ## 使用マシン
    HOST : localhost(Rocky-Linux)
    IPV4 : 192.168.1.4
    MEMO : ホスト
  
  ## コマンド
    ss -t  // TCP接続を表示
    ss -u  // UDP接続を表示
    ss -s  // 統計情報を表示
  
[確認]
  $ cd $HOME
  $ ss -s (統計情報)
  
  コマンドの実行結果
  --------------------------------------------------
  Total: 1154
  TCP: 14 (estab 1, closed 6, orphaned 0, timewait 0)
  
  Transport  Total     IP        IPv6
  RAW        1         0         1        
  UDP        12        8         4        
  TCP        8         4         4        
  INET       21        12        9        
  FRAG       0         0         0        
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[28]
  ネットワークトラフィックの測定 - 05 (netperf)
  
[内容]
  ## 作業内容
    ホスト間でネットワークのスループット測定
  
  ## 使用マシン1
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## 仮想マシン2
    HOST : vm13
    IPV4 : 192.168.122.13
    MEMO : 仮想マシン
  
[確認]
  vm12$ cd $HOME
  vm12$ sudo yum -y install wget (コマンドのインストール)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ wget http://repo.iotti.biz/CentOS/7/x86_64/netperf-2.7.0-1.el7.lux.x86_64.rpm (RPMファイル入手)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo rpm -ivh netperf-2.7.0-1.el7.lux.x86_64.rpm
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo firewall-cmd --add-port=12865/tcp --permanent
  
  コマンドの実行結果
  --------------------------------------------------
  success
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo firewall-cmd --add-port=12866/tcp --permanent
  
  コマンドの実行結果
  --------------------------------------------------
  success
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo firewall-cmd --reload
  
  コマンドの実行結果
  --------------------------------------------------
  success
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo netserver (Netperfサーバー起動)
  
  コマンドの実行結果
  --------------------------------------------------
  Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC
  --------------------------------------------------
    
    vm13$ cd $HOME
    vm13$ sudo yum -y install wget (コマンドのインストール)
    
    コマンドの実行結果
    --------------------------------------------------
    (省略) -> エラー出力が無ければOK
    --------------------------------------------------
    
    vm13$ cd $HOME
    vm13$ wget http://repo.iotti.biz/CentOS/7/x86_64/netperf-2.7.0-1.el7.lux.x86_64.rpm (RPMファイル入手)
    
    コマンドの実行結果
    --------------------------------------------------
    (省略) -> エラー出力が無ければOK
    --------------------------------------------------
    
    vm13$ cd $HOME
    vm13$ sudo rpm -ivh netperf-2.7.0-1.el7.lux.x86_64.rpm
    
    コマンドの実行結果
    --------------------------------------------------
    (省略) -> エラー出力が無ければOK
    --------------------------------------------------
    
    vm13$ cd $HOME
    vm13$ netperf -H 192.168.122.12 -p 12865 -- -P 12866
    
    コマンドの実行結果
    --------------------------------------------------
    MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 12866 AF_INET to 192.168.122.12 () port 12866 AF_INET

    Recv   Send    Send                          
    Socket Socket  Message  Elapsed              
    Size   Size    Size     Time     Throughput

    bytes  bytes   bytes    secs.    10^6bits/sec
    87380  16384   16384    10.00    6038.26  // 6000M(Bits) / 8 -> 750M(Bytes)/秒
    --------------------------------------------------
    
  vm12$ cd $HOME
  vm12$ sudo pkill netserver (Netperfサーバー停止)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[29]
  ネットワークトラフィックの測定 - 06 (iptraf-ng)
  
[内容]
  ## 作業内容
    ネットワークトラフィックのモニタリング
  
  ## 使用マシン1
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## 仮想マシン2
    HOST : vm13
    IPV4 : 192.168.122.13
    MEMO : 仮想マシン
  
[確認]
  vm12$ cd $HOME
  vm12$ sudo yum -y install iptraf-ng (コマンドのインストール)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo iptraf-ng (ネットワークトラフィックのモニタリング)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> Main Menu -> [IP traffic monitor] -> [eth0]
  --------------------------------------------------
    
    vm13$ cd $HOME
    vm13$ ping -c 3 vm12 (ICMPパケット送信)
    
    コマンドの実行結果
    --------------------------------------------------
    PING vm12 (192.168.122.12) 56(84) bytes of data.
    64 bytes from vm12 (192.168.122.12): icmp_seq=1 ttl=64 time=0.553 ms
    64 bytes from vm12 (192.168.122.12): icmp_seq=2 ttl=64 time=0.870 ms
    64 bytes from vm12 (192.168.122.12): icmp_seq=3 ttl=64 time=0.872 ms
    
    --- vm12 ping statistics ---
    3 packets transmitted, 3 received, 0% packet loss, time 2003ms
    rtt min/avg/max/mdev = 0.553/0.765/0.872/0.149 ms
    --------------------------------------------------
    
  vm12$ cd $HOME
  vm12$ (パケット監視)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> ICMPパケット確認
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
