================================================================================
[01] ファイルシステムの情報 - 01 (cat /etc/fstab)
[02] ファイルシステムの情報 - 02 (blkid)
[03] ファイルシステムの情報 - 03 (cat /proc/filesystems)
[04] ファイルシステムの情報 - 04 (cat /etc/mtab)
[05] ファイルシステムの情報 - 05 (cat /proc/mounts)
[06] マウントとアンマウント - 01 (mount)
[07] マウントとアンマウント - 02 (umount)
[08] スワップ - 01 (mkswap)
[09] スワップ - 02 (swapon)
[10] スワップ - 03 (swapoff)
[11] ファイルシステム作成 - 01 (ext2)
[12] ファイルシステム作成 - 02 (ext3)
[13] ファイルシステム作成 - 03 (ext4)
[14] ファイルシステム作成 - 04 (ext3 -> ext4)
[15] ファイルシステム作成 - 05 (xfs)
[16] ファイルシステム作成 - 06 (btrfs)
[17] コマンド(mkfs)
[18] CD/DVD作成 - 01
[19] CD/DVD作成 - 02
[20] 暗号化デバイス
[21] スーパーブロック
[22] ファイルシステムチェック - 01 (fsck)
[23] ファイルシステムチェック - 02 (e2fsck)
[24] ファイルシステムチェック - 03 (xfs_repair)
[25] ファイルシステム管理(ext2,ext3,ext4) - 01 (tune2fs)
[26] ファイルシステム管理(ext2,ext3,ext4) - 02 (badblocks)
[27] ファイルシステム管理(ext2,ext3,ext4) - 03 (debugfs)
[28] S.M.A.R.T
[29] ファイルシステム管理(xfs) - 01 (xfs_admin)
[30] ファイルシステム管理(xfs) - 02 (xfs_info)
[31] ファイルシステム管理(xfs) - 03 (xfsdump)
[32] ファイルシステム管理(xfs) - 04 (xfsrestore)
[33] ファイルシステム管理(xfs) - 05 (xfs_repair)
[34] ファイルシステム管理(btrfs) - 01 (btrfs)
[35] ファイルシステム管理(btrfs) - 02 (btrfs-convert)
[36] オートマウント
================================================================================
[01]
  ファイルシステムの情報 - 01 (cat /etc/fstab)
  
[内容]
  ## 作業内容
    システムのファイルシステムの情報をコマンド(cat /etc/fstab)から確認
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## 設定ファイル(/etc/fstab)の書式
  --------------------------------------------------
  (デバイス名 or UUID or ラベル名)  (マウントポイント)  (ファイルシステム)  (マウントオプション)  (DUMP対象)  (FSCK順序)
  
  設定例1
    /dev/sda1  /boot  xfs  defaults  0  0
    /dev/sda2  /      xfs  defaults  0  0
  
  設定例2
    UUID=1d5e0998-fe61-4a82-83be-96a01cfbbd31  /boot  xfs  defaults  0  0
    UUID=1d5e0998-fe61-4a82-83be-96a01cfbbd99  /      xfs  defaults  0  0
  
  設定例3
    LABEL=sda1  /boot  xfs  defaults  0  0
    LABEL=sda2  /      xfs  defaults  0  0
  
  ファイルシステム
    EXT2      : EXTの拡張版
    EXT3      : ジャーナリング機能付加
    EXT4      : 機能拡張
    ReiserFS  : Linux用ジャーナリングファイルシステム
    JFS       : IBM製ジャーナリングファイルシステム
    XFS       : SGI製ジャーナリングファイルシステム -> CentOS7のデフォルト
    btrfs     : 先進的ファイルシステム
    ISO9660   : CD-ROM用
    UDF       : DVD用
    F2FS      : SSD用
    MSDOS     : MS-DOS用
    FAT/FAT32 : フラッシュメモリ用(USB)
    NTFS      : WindowsNT/2000以降
    HPFS      : OS/2用
    HFS       : MacOS用
    HFS+      : MacOS8.1以降
    NFS       : ファイル共有(Linux)
    CIFS      : ファイル共有(Windows)
    procfs    : プロセス情報を扱う仮想ファイルシステム(/proc)
    sysfs     : デバイス情報を扱う仮想ファイルシステム
    tmpfs     : 仮想メモリを扱う仮想ファイルシステム
    devpts    : 疑似端末制御のための仮想ファイルシステム
    usbfs     : USBデバイス監視用
    cramfs    : 組込システム用
    swap      : スワップ領域
  
  マウントオプション
    async     : 入出力同期  // 非同期
    sync      : 入出力同期  // 同期
    atime     : Iノードアクセス時刻更新  // 更新
    relatime  : Iノードアクセス時刻更新  // 一定時間後に更新
    noatime   : Iノードアクセス時刻更新  // 更新しない(ディスクアクセス高速化)
    auto      : コマンド「mount -a」の実行時の動作  // マウント
    noauto    : コマンド「mount -a」の実行時の動作  // マウントしない
    exec      : バイナリ実行を許可
    noexec    : バイナリ実行を禁止
    suid      : SUID, SGID
    nosuid    : SUID, SGID
    ro        : 読み取り専用
    rw        : 書き込み可能
    user      : 一般ユーザーマウント許可、アンマウントはマウント操作したユーザーのみ
    users     : 一般ユーザーマウント許可、アンマウントもマウント操作したユーザー以外で許可
    nouser    : 一般ユーザーマウント禁止
    owner     : その他  // デバイスファイル所有者のマウント許可
    defaults  : その他  // async, auto, dev, exec, nouser, rw, suid
    dev       : その他  // ファイルシステム上のデバイスファイル使用可
    group     : その他  // 条件「ユーザーのグループ = デバイスファイルの所有グループ」が満たされた場合にマウント許可
    uid=UID   : その他  // 全ファイル所有者を指定UIDにする
    gid=GID   : その他  // 全ファイル所有グループを指定GIDにする
  
  DUMP対象
    0         : バックアップ対象外
    1-9       : バックアップ対象
  
  FSCK順序
    0         : チェック対象外
    1-9       : チェック順序(数字順)
  --------------------------------------------------
  
[確認]
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス表示)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ cat /etc/fstab | grep -vE '^#|^$' (設定ファイルを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  UUID=7c5f5868-f985-4022-8bfc-c748dde563db  /boot  xfs   defaults  0  0
  /dev/mapper/centos_vm11-root               /      xfs   defaults  0  0
  /dev/mapper/centos_vm11-swap               swap   swap  defaults  0  0
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[02]
  ファイルシステムの情報 - 02 (blkid)
  
[内容]
  ## 作業内容
    デバイスのUUIDを確認
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
[確認]
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス表示)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo blkid (デバイスのUUIDを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/vda1: UUID="7c5f5868-f985-4022-8bfc-c748dde563db" TYPE="xfs" 
  /dev/vda2: UUID="z5NZEY-ZvKV-c9Bj-wR3e-Vhbl-uJ38-I6zSS2" TYPE="LVM2_member" 
  /dev/mapper/centos_vm11-root: UUID="1569367e-31dd-4f04-b615-f0d5faa31eed" TYPE="xfs" 
  /dev/mapper/centos_vm11-swap: UUID="9731028d-89e7-42c4-bb1e-b2fc27ba45b8" TYPE="swap" 
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[03]
  ファイルシステムの情報 - 03 (cat /proc/filesystems)
  
[内容]
  ## 作業内容
    カーネルサポートのファイルシステムを表示
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
[確認]
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス表示)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ cat /proc/filesystems (カーネルサポートのファイルシステムを表示)
  
  コマンドの実行結果
  --------------------------------------------------
  nodev  sysfs
  nodev  rootfs
  nodev  ramfs
  nodev  bdev
  nodev  proc
  nodev  cpuset
  nodev  cgroup
  nodev  cgroup2
  nodev  tmpfs
  nodev  devtmpfs
  nodev  configfs
  nodev  debugfs
  nodev  tracefs
  nodev  securityfs
  nodev  sockfs
  nodev  dax
  nodev  bpf
  nodev  pipefs
  nodev  hugetlbfs
  nodev  devpts
  nodev  autofs
  nodev  pstore
  nodev  mqueue
  nodev  selinuxfs
         xfs
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[04]
  ファイルシステムの情報 - 04 (cat /etc/mtab)
  
[内容]
  ## 作業内容
    マウント済みのファイルシステムを表示
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
[確認]
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス表示)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot -> マウント済
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ cat /etc/mtab | grep vda (マウント済みのファイルシステムを表示)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/vda1 /boot xfs rw,seclabel,relatime,attr2,inode64,noquota 0 0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ cat /etc/mtab | grep centos_vm11-root (マウント済みのファイルシステムを表示)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/mapper/centos_vm11-root / xfs rw,seclabel,relatime,attr2,inode64,noquota 0 0
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[05]
  ファイルシステムの情報 - 05 (cat /proc/mounts)
  
[内容]
  ## 作業内容
    マウント済みのファイルシステムを表示
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
[確認]
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス表示)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot -> マウント済
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ cat /proc/mounts | grep vda (マウント済みのファイルシステムを表示)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/vda1 /boot xfs rw,seclabel,relatime,attr2,inode64,noquota 0 0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ cat /proc/mounts | grep centos_vm11-root (マウント済みのファイルシステムを表示)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/mapper/centos_vm11-root / xfs rw,seclabel,relatime,attr2,inode64,noquota 0 0
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[06]
  マウントとアンマウント - 01 (mount)
  
[内容]
  ## 作業内容
    指定ファイルシステムでデバイスをマウントする
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド(mount)
    mount -a      // 設定ファイル(/etc/fstab)の全ファイルシステムをマウント
    mount -o XX   // マウントオプション(XX)を指定
    mount -U XX   // UUID(XX)を指定
    mount -n      // 設定ファイル(/etc/mtab)に書き込まない
    mount -r      // mount -o ro
    mount -w      // mount -o rw
    mount -t XX   // ファイルシステム種類(XX)を指定
  
[確認]
  vm11$ cd $HOME
  vm11$ LANG=C dd if=/dev/zero of=image0.img bs=1M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  10+0 records in
  10+0 records out
  10485760 bytes (10 MB) copied, 0.0116401 s, 901 MB/s
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ losetup -f (使用可能なループバックデバイス名を表示)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  [  569.178031] loop: module loaded
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mkfs -t ext4 /dev/loop0 (ループバックデバイスにファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> ブロック割当のメッセージが多数出力されるが成功
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mount -o defaults -t ext4 /dev/loop0 /mnt (マウントオプションはデフォルト、ファイルシステム指定でマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  [  673.076609] EXT4-fs (loop0): mounted filesystem with ordered data mode. Opts: (null)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  loop0                         7:0     0    10M   0  loop  /mnt -> ループバックデバイス
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ mount | grep loop0 (マウント状況およびマウントオプションを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0 on /mnt type ext4 (rw,relatime,seclabel,data=ordered)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ cat /etc/mtab | grep loop0 (マウント状況およびマウントオプションを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0 /mnt ext4 rw,seclabel,relatime,data=ordered 0 0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ cat /proc/mounts | grep loop0 (マウント状況およびマウントオプションを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0 /mnt ext4 rw,seclabel,relatime,data=ordered 0 0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo umount /mnt (ループバックデバイスをアンマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[07]
  マウントとアンマウント - 02 (umount)
  
[内容]
  ## 作業内容
    指定ファイルシステムでデバイスをマウントする
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド(umount)
    umount -a     // 設定ファイル(/etc/mtab)の全ファイルシステムをアンマウント
    umount -t XX  // ファイルシステム種類(XX)を指定
  
[確認]
  上記の「06」を参照
  
================================================================================
[08]
  スワップ - 01 (mkswap)
  
[内容]
  ## 作業内容
    指定デバイスをスワップ領域化する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド(mkswap)
    mkswap XX     // スワップ領域(XX)を作成
    mkswap -c     // 不良ブロックをチェック
    mkswap -L XX  // ラベル(XX)を付与
  
[確認]
  vm11$ cd $HOME
  vm11$ LANG=C dd if=/dev/zero of=image0.img bs=1M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  10+0 records in
  10+0 records out
  10485760 bytes (10 MB) copied, 0.0251526 s, 417 MB/s
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ losetup -f (使用可能なループバックデバイス名を表示)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ LANG=C sudo mkswap -c -L swap0 /dev/loop0 (不良ブロックのチェック、ラベル名指定でスワップ領域を作成)
  
  コマンドの実行結果
  --------------------------------------------------
  0 bad pages
  Setting up swapspace version 1, size = 10236 KiB
  LABEL=swap0, UUID=e81c826a-c6d2-406c-b71c-5abd6485965c
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo swapon /dev/loop0 (スワップ領域の有効化)
  
  コマンドの実行結果
  --------------------------------------------------
  [ 1158.256520] Adding 10236k swap on /dev/loop0.  Priority:-3 extents:1 across:10236k FS
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ swapon -s (有効なスワップ領域を表示)
  
  コマンドの実行結果
  --------------------------------------------------
  Filename     Type        Size      Used   Priority
  /dev/dm-1    partition   2097148   0      -2
  /dev/loop0   partition   10236     0      -3
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ cat /proc/swaps (仮想ファイルで確認)
  
  コマンドの実行結果
  --------------------------------------------------
  Filename     Type        Size      Used   Priority
  /dev/dm-1    partition   2097148   0      -2
  /dev/loop0   partition   10236     0      -3
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイスを表示)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  loop0                         7:0     0    10M   0  loop  [SWAP] -> スワップ領域化したループバックデバイス
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo swapoff /dev/loop0 (スワップ領域の無効化)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[09]
  スワップ - 02 (swapon)
  
[内容]
  ## 作業内容
    指定デバイスをスワップ領域化する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド(swapon)
    swapon XX     // スワップ領域(XX)を有効化
    swapon -a     // 設定ファイル(/etc/fstab)の全スワップ領域を有効化
    swapon -s     // 有効なスワップ領域を表示
  
[確認]
  上記の「08」を参照
  
================================================================================
[10]
  スワップ - 03 (swapoff)
  
[内容]
  ## 作業内容
    指定デバイスのスワップ領域化を解除する
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド(swapoff)
    swapoff XX    // スワップ領域(XX)を無効化
    swapoff -a    // 設定ファイル(/etc/fstab)の全スワップ領域を無効化
  
[確認]
  上記の「08」を参照
  
================================================================================
[11]
  ファイルシステム作成 - 01 (ext2)
  
[内容]
  ## 作業内容
    デバイスにファイルシステム(ext2)をコマンド(mke2fs)で作成してマウントする
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド(mke2fs)
    mke2fs -b XX    // ブロックサイズ(XX)
    mke2fs -c       // 不良ブロックのチェック
    mke2fs -i XX    // iノードあたりのバイト数
    mke2fs -j       // ファイルシステム(ext3)を作成
    mke2fs -J       // ファイルシステム(ext4)を作成
    mke2fs -m XX %  // root用の管理領域の割合(XX)%
    mke2fs -n       // 動作のシミュレートのみ
    mke2fs -t XX    // ファイルシステムの種類(ext2,ext3,ext4)
  
[確認]
  vm11$ cd $HOME
  vm11$ LANG=C dd if=/dev/zero of=image0.img bs=1M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  10+0 records in
  10+0 records out
  10485760 bytes (10 MB) copied, 0.0196277 s, 534 MB/s
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ losetup -f (使用可能なループバックデバイス名を表示)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mke2fs -b 4096 -c -m 1 /dev/loop0 -n (動作のシミュレートのみ)
  
  コマンドの実行結果
  --------------------------------------------------
  mke2fs 1.42.9 (28-Dec-2013)
  Filesystem label=
  OS type: Linux
  Block size=4096 (log=2)
  Fragment size=4096 (log=2)
  Stride=0 blocks, Stripe width=0 blocks
  2560 inodes, 2560 blocks
  25 blocks (0.98%) reserved for the super user
  First data block=0
  1 block group
  32768 blocks per group, 32768 fragments per group
  2560 inodes per group
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mke2fs -b 4096 -c -m 1 /dev/loop0 (ファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  mke2fs 1.42.9 (28-Dec-2013)
  Filesystem label=
  OS type: Linux
  Block size=4096 (log=2)
  Fragment size=4096 (log=2)
  Stride=0 blocks, Stripe width=0 blocks
  2560 inodes, 2560 blocks
  25 blocks (0.98%) reserved for the super user
  First data block=0
  1 block group
  32768 blocks per group, 32768 fragments per group
  2560 inodes per group
  
  Checking for bad blocks (read-only test):   0.00% done, 0:00 elapsed. (0/0/0 errdone                                                 
  Allocating group tables: done                            
  Writing inode tables: done                            
  Writing superblocks and filesystem accounting information: done
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mount -o defaults -t ext2 /dev/loop0 /mnt (マウントオプションはデフォルト、ファイルシステム指定でマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  [ 2232.600419] EXT4-fs (loop0): mounting ext2 file system using the ext4 subsystem
  [ 2232.618772] EXT4-fs (loop0): mounted filesystem without journal. Opts: (null)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  loop0                         7:0     0    10M   0  loop  /mnt -> ループバックデバイス
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ mount | grep loop0 (マウント状況およびマウントオプションを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0 on /mnt type ext2 (rw,relatime,seclabel,block_validity,barrier,user_xattr,acl)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo umount /mnt (ループバックデバイスをアンマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[12]
  ファイルシステム作成 - 02 (ext3)
  
[内容]
  ## 作業内容
    デバイスにファイルシステム(ext3)をコマンド(mke2fs)で作成してマウントする
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド(mke2fs)
    mke2fs -b XX    // ブロックサイズ(XX)
    mke2fs -c       // 不良ブロックのチェック
    mke2fs -i XX    // iノードあたりのバイト数
    mke2fs -j       // ファイルシステム(ext3)を作成
    mke2fs -J       // ファイルシステム(ext4)を作成
    mke2fs -m XX %  // root用の管理領域の割合(XX)%
    mke2fs -n       // 動作のシミュレートのみ
    mke2fs -t XX    // ファイルシステムの種類(ext2,ext3,ext4)

[確認]
  vm11$ cd $HOME
  vm11$ LANG=C dd if=/dev/zero of=image0.img bs=1M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  10+0 records in
  10+0 records out
  10485760 bytes (10 MB) copied, 0.0611587 s, 171 MB/s
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ losetup -f (使用可能なループバックデバイス名を表示)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mke2fs -j -b 4096 -c -m 1 /dev/loop0 -n (動作のシミュレートのみ)
  
  コマンドの実行結果
  --------------------------------------------------
  mke2fs 1.42.9 (28-Dec-2013)
  Filesystem label=
  OS type: Linux
  Block size=4096 (log=2)
  Fragment size=4096 (log=2)
  Stride=0 blocks, Stripe width=0 blocks
  2560 inodes, 2560 blocks
  25 blocks (0.98%) reserved for the super user
  First data block=0
  1 block group
  32768 blocks per group, 32768 fragments per group
  2560 inodes per group
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mke2fs -j -b 4096 -c -m 1 /dev/loop0 (ファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  mke2fs 1.42.9 (28-Dec-2013)
  Filesystem label=
  OS type: Linux
  Block size=4096 (log=2)
  Fragment size=4096 (log=2)
  Stride=0 blocks, Stripe width=0 blocks
  2560 inodes, 2560 blocks
  25 blocks (0.98%) reserved for the super user
  First data block=0
  1 block group
  32768 blocks per group, 32768 fragments per group
  2560 inodes per group
  
  Checking for bad blocks (read-only test):   0.00% done, 0:00 elapsed. (0/0/0 errdone                                                 
  Allocating group tables: done                            
  Writing inode tables: done                            
  Creating journal (1024 blocks): done -> ジャーナル領域が作成
  Writing superblocks and filesystem accounting information: done
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mount -o defaults -t ext3 /dev/loop0 /mnt (マウントオプションはデフォルト、ファイルシステム指定でマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  [ 5406.128054] EXT4-fs (loop0): mounting ext3 file system using the ext4 subsystem
  [ 5406.145481] EXT4-fs (loop0): mounted filesystem with ordered data mode. Opts: (null)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  loop0                         7:0     0    10M   0  loop  /mnt -> ループバックデバイス
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ mount | grep loop0 (マウント状況およびマウントオプションを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0 on /mnt type ext3 (rw,relatime,seclabel,data=ordered)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo umount /mnt (ループバックデバイスをアンマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[13]
  ファイルシステム作成 - 03 (ext4)
  
[内容]
  ## 作業内容
    デバイスにファイルシステム(ext4)をコマンド(mke2fs)で作成してマウントする
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド(mke2fs)
    mke2fs -b XX    // ブロックサイズ(XX)
    mke2fs -c       // 不良ブロックのチェック
    mke2fs -i XX    // iノードあたりのバイト数
    mke2fs -j       // ファイルシステム(ext3)を作成
    mke2fs -J       // ファイルシステム(ext4)を作成
    mke2fs -m XX %  // root用の管理領域の割合(XX)%
    mke2fs -n       // 動作のシミュレートのみ
    mke2fs -t XX    // ファイルシステムの種類(ext2,ext3,ext4)

[確認]
  vm11$ cd $HOME
  vm11$ LANG=C dd if=/dev/zero of=image0.img bs=1M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  10+0 records in
  10+0 records out
  10485760 bytes (10 MB) copied, 0.0222371 s, 472 MB/s
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ losetup -f (使用可能なループバックデバイス名を表示)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mke2fs -t ext4 -b 4096 -c -m 1 /dev/loop0 -n (動作のシミュレートのみ)
  
  コマンドの実行結果
  --------------------------------------------------
  Filesystem label=
  OS type: Linux
  Block size=4096 (log=2)
  Fragment size=4096 (log=2)
  Stride=0 blocks, Stripe width=0 blocks
  2560 inodes, 2560 blocks
  25 blocks (0.98%) reserved for the super user
  First data block=0
  Maximum filesystem blocks=4194304
  1 block group
  32768 blocks per group, 32768 fragments per group
  2560 inodes per group
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mke2fs -t ext4 -b 4096 -c -m 1 /dev/loop0 (ファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  mke2fs 1.42.9 (28-Dec-2013)
  Filesystem label=
  OS type: Linux
  Block size=4096 (log=2)
  Fragment size=4096 (log=2)
  Stride=0 blocks, Stripe width=0 blocks
  2560 inodes, 2560 blocks
  25 blocks (0.98%) reserved for the super user
  First data block=0
  Maximum filesystem blocks=4194304
  1 block group
  32768 blocks per group, 32768 fragments per group
  2560 inodes per group
  
  Checking for bad blocks (read-only test):   0.00% done, 0:00 elapsed. (0/0/0 errdone                                                 
  Allocating group tables: done                            
  Writing inode tables: done                            
  Creating journal (1024 blocks): done
  Writing superblocks and filesystem accounting information: done
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mount -o defaults -t ext4 /dev/loop0 /mnt (マウントオプションはデフォルト、ファイルシステム指定でマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  [ 7615.250203] EXT4-fs (loop0): mounted filesystem with ordered data mode. Opts: (null)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  loop0                         7:0     0    10M   0  loop  /mnt -> ループバックデバイス
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ mount | grep loop0 (マウント状況およびマウントオプションを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0 on /mnt type ext4 (rw,relatime,seclabel,data=ordered)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo umount /mnt (ループバックデバイスをアンマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[14]
  ファイルシステム作成 - 04 (ext3 -> ext4)
  
[内容]
  ## 作業内容
    ファイルシステム(ext3)をコマンド(tune2fs)でアップグレード(ext4)後にマウントする
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド(tune2fs)
    tune2fs -c XX  // 最大マウント回数(XX)に達したらファイルシステムチェック -> 0の場合はチェックしない
    tune2fs -C XX  // 現在のマウント回数を設定
    tune2fs -i XX  // ファイルシステムチェック間隔(XX日) -> 0の場合はチェックしない
    tune2fs -j     // ext2 -> ext3
    tune2fs -O     // ext3 -> ext4
    tune2fs -m XX  // root用予約領域(XX%)
    tune2fs -l     // スーパーブロック内容を表示
    tune2fs -L XX  // ファイルシステムのボリュームラベル(XX)
    tune2fs -U XX  // UUID(XX)
  
[確認]
  vm11$ cd $HOME
  vm11$ LANG=C dd if=/dev/zero of=image0.img bs=1M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  10+0 records in
  10+0 records out
  10485760 bytes (10 MB) copied, 0.0214343 s, 489 MB/s
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ losetup -f (使用可能なループバックデバイス名を表示)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mke2fs -j -b 4096 -c -m 1 /dev/loop0 (ファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> ファイルシステム(ext3)が作成された
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo tune2fs -O(大文字のオー) extent,dir_index /dev/loop0 (ファイルシステムをアップグレード)
  
  コマンドの実行結果
  --------------------------------------------------
  tune2fs 1.42.9 (28-Dec-2013)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo e2fsck /dev/loop0 (ファイルシステムのチェック)
  
  コマンドの実行結果
  --------------------------------------------------
  e2fsck 1.42.9 (28-Dec-2013)
  /dev/loop0: clean, 11/2560 files, 1115/2560 blocks
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mount -o defaults -t ext4 /dev/loop0 /mnt (マウントオプションはデフォルト、ファイルシステム指定でマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  [ 8599.278870] EXT4-fs (loop0): mounted filesystem with ordered data mode. Opts: (null)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  loop0                         7:0     0    10M   0  loop  /mnt -> ループバックデバイス
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ mount | grep loop0 (マウント状況およびマウントオプションを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0 on /mnt type ext4 (rw,relatime,seclabel,data=ordered)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo umount /mnt (ループバックデバイスをアンマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[15]
  ファイルシステム作成 - 05 (xfs)
  
[内容]
  ## 作業内容
    デバイスにファイルシステム(xfs)を作成後にマウントする
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
[確認]
  vm11$ cd $HOME
  vm11$ LANG=C dd if=/dev/zero of=image0.img bs=5M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  10+0 records in
  10+0 records out
  52428800 bytes (52 MB) copied, 0.0812395 s, 645 MB/s
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ losetup -f (使用可能なループバックデバイス名を表示)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  [  108.438602] loop: module loaded
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mkfs -t xfs /dev/loop0 (ファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mount -o defaults -t xfs /dev/loop0 /mnt (マウントオプションはデフォルト、ファイルシステム指定でマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  [  229.146284] XFS (loop0): Mounting V5 Filesystem
  [  229.151853] XFS (loop0): Ending clean mount
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  loop0                         7:0     0    50M   0  loop  /mnt -> ループバックデバイス
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ mount | grep loop0 (マウント状況およびマウントオプションを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0 on /mnt type xfs (rw,relatime,seclabel,attr2,inode64,noquota)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo umount /mnt (ループバックデバイスをアンマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  [  371.518543] XFS (loop0): Unmounting Filesystem
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[16]
  ファイルシステム作成 - 06 (btrfs)
  
[内容]
  ## 作業内容
    デバイスにファイルシステム(btrfs)を作成後にマウントする
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
[確認]
  vm11$ cd $HOME
  vm11$ LANG=C dd if=/dev/zero of=image0.img bs=10M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  10+0 records in
  10+0 records out
  104857600 bytes (105 MB) copied, 0.304158 s, 345 MB/s
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ losetup -f (使用可能なループバックデバイス名を表示)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mkfs -t btrfs /dev/loop0 (ファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  btrfs-progs v4.9.1
  See http://btrfs.wiki.kernel.org for more information.
  
  Performing full device TRIM /dev/loop0 (100.00MiB) ...
  Label:              (null)
  UUID:               15df6ae2-0441-48c7-b166-ce3976afd55b
  Node size:          16384
  Sector size:        4096
  Filesystem size:    100.00MiB
  Block group profiles:
    Data:             single            8.00MiB
    Metadata:         DUP              32.00MiB
    System:           DUP               8.00MiB
  SSD detected:       no
  Incompat features:  extref, skinny-metadata
  Number of devices:  1
  Devices:
    ID        SIZE  PATH
     1   100.00MiB  /dev/loop0
  
  [ 2541.093688] raid6: sse2x1   gen()  7500 MB/s
  [ 2541.111862] raid6: sse2x1   xor()  5402 MB/s
  [ 2541.130690] raid6: sse2x2   gen()  8441 MB/s
  [ 2541.148670] raid6: sse2x2   xor()  6343 MB/s
  [ 2541.166741] raid6: sse2x4   gen()  8558 MB/s
  [ 2541.184732] raid6: sse2x4   xor()  4011 MB/s
  [ 2541.186772] raid6: using algorithm sse2x4 gen() 8558 MB/s
  [ 2541.189078] raid6: .... xor() 4011 MB/s, rmw enabled
  [ 2541.191036] raid6: using ssse3x2 recovery algorithm
  [ 2541.253285] xor: automatically using best checksumming function   avx       
  [ 2541.627005] Btrfs loaded, crc32c=crc32c-intel
  [ 2541.630352] BTRFS: device fsid 15df6ae2-0441-48c7-b166-ce3976afd55b devid 1 transid 5 /dev/loop0
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mount -o defaults -t btrfs /dev/loop0 /mnt (マウントオプションはデフォルト、ファイルシステム指定でマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  [ 2716.122926] BTRFS info (device loop0): disk space caching is enabled
  [ 2716.125305] BTRFS info (device loop0): has skinny extents
  [ 2716.127507] BTRFS info (device loop0): flagging fs with big metadata feature
  [ 2716.132885] BTRFS info (device loop0): creating UUID tree
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  loop0                         7:0     0   100M   0  loop  /mnt -> ループバックデバイス
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ mount | grep loop0 (マウント状況およびマウントオプションを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0 on /mnt type btrfs (rw,relatime,seclabel,space_cache,subvolid=5,subvol=/)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo umount /mnt (ループバックデバイスをアンマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[17]
  コマンド(mkfs)
  
[内容]
  ## 作業内容
    デバイスに指定ファイルシステムをコマンド(mkfs)で作成後にマウントする
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド(mkfs)
    mkfs -t XX  // ファイルシステム(XX)を作成
    mkfs -c     // 不良ブロックをチェック
  
[確認]
  vm11$ cd $HOME
  vm11$ LANG=C dd if=/dev/zero of=image0.img bs=10M count=10
  vm11$ LANG=C dd if=/dev/zero of=image1.img bs=10M count=10
  vm11$ LANG=C dd if=/dev/zero of=image2.img bs=10M count=10
  vm11$ LANG=C dd if=/dev/zero of=image3.img bs=10M count=10
  vm11$ LANG=C dd if=/dev/zero of=image4.img bs=10M count=10
  
  コマンドの実行結果
  --------------------------------------------------
  10+0 records in
  10+0 records out
  104857600 bytes (105 MB) copied, 0.267291 s, 392 MB/s
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup /dev/loop0 image0.img
  vm11$ sudo losetup /dev/loop1 image1.img
  vm11$ sudo losetup /dev/loop2 image2.img
  vm11$ sudo losetup /dev/loop3 image3.img
  vm11$ sudo losetup /dev/loop4 image4.img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mkfs -t ext2 /dev/loop0
  vm11$ sudo mkfs -t ext3 /dev/loop1
  vm11$ sudo mkfs -t ext4 /dev/loop2
  vm11$ sudo mkfs -t xfs /dev/loop3
  vm11$ sudo mkfs -t btrfs /dev/loop4
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm11$ cd /mnt
  vm11$ sudo mkdir loop0 loop1 loop2 loop3 loop4
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mount -o defaults -t ext2 /dev/loop0 /mnt/loop0
  vm11$ sudo mount -o defaults -t ext3 /dev/loop1 /mnt/loop1
  vm11$ sudo mount -o defaults -t ext4 /dev/loop2 /mnt/loop2
  vm11$ sudo mount -o defaults -t xfs /dev/loop3 /mnt/loop3
  vm11$ sudo mount -o defaults -t btrfs /dev/loop4 /mnt/loop4
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  loop0                         7:0     0   100M   0  loop  /mnt/loop0 -> ループバックデバイス
  loop1                         7:1     0   100M   0  loop  /mnt/loop1 -> ループバックデバイス
  loop2                         7:2     0   100M   0  loop  /mnt/loop2 -> ループバックデバイス
  loop3                         7:3     0   100M   0  loop  /mnt/loop3 -> ループバックデバイス
  loop4                         7:4     0   100M   0  loop  /mnt/loop4 -> ループバックデバイス
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ LANG=C df -mT (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  Filesystem                    Type      1M-blocks  Used  Available  Use%  Mounted on
  devtmpfs                      devtmpfs        947     0        947    0%  /dev
  tmpfs                         tmpfs           969     0        969    0%  /dev/shm
  tmpfs                         tmpfs           969     1        968    1%  /run
  tmpfs                         tmpfs           969     0        969    0%  /sys/fs/cgroup
  /dev/mapper/centos_vm11-root  xfs           17394  6457      10938   38%  /
  /dev/vda1                     xfs            1014   199        816   20%  /boot
  tmpfs                         tmpfs           114     0        114    0%  /run/user/1000
  /dev/loop0                    ext2             97     2         91    2%  /mnt/loop0 -> ループバックデバイス
  /dev/loop1                    ext3             93     2         87    2%  /mnt/loop1 -> ループバックデバイス
  /dev/loop2                    ext4             93     2         85    2%  /mnt/loop2 -> ループバックデバイス
  /dev/loop3                    xfs              97     6         92    6%  /mnt/loop3 -> ループバックデバイス
  /dev/loop4                    btrfs           100    17         19   47%  /mnt/loop4 -> ループバックデバイス
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ mount | grep -E 'loop[0-4]' (マウント状況およびマウントオプションを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/loop0 on /mnt/loop0 type ext2 (rw,relatime,seclabel,block_validity,barrier,user_xattr,acl)
  /dev/loop1 on /mnt/loop1 type ext3 (rw,relatime,seclabel,data=ordered)
  /dev/loop2 on /mnt/loop2 type ext4 (rw,relatime,seclabel,data=ordered)
  /dev/loop3 on /mnt/loop3 type xfs (rw,relatime,seclabel,attr2,inode64,noquota)
  /dev/loop4 on /mnt/loop4 type btrfs (rw,relatime,seclabel,space_cache,subvolid=5,subvol=/)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo umount /mnt/loop0
  vm11$ sudo umount /mnt/loop1
  vm11$ sudo umount /mnt/loop2
  vm11$ sudo umount /mnt/loop3
  vm11$ sudo umount /mnt/loop4
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ rm -f image[0-4].img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[18]
  CD/DVD作成 - 01
  
[内容]
  ## 作業内容
    CD-ROMイメージ(ISO9660)の作成を行い、システムにマウント後にチェックする
  
  ## 使用マシン
    HOST : vm11
    IPV4 : 192.168.122.11
    MEMO : 仮想マシン
  
  ## コマンド(mkisofs)
    mkisofs -b     // ブート可能CD
    mkisofs -o XX  // イメージファイル(XX)を作成
    mkisofs -J     // Windows
    mkisofs -r(R)  // UNIX(LongName)
    mkisofs -udf   // DVD
  
[確認]
  vm11$ cd $HOME
  vm11$ sudo yum -y install mkisofs (パッケージ追加)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm11$ cd $HOME/history -> 先にディレクトリ作成
  vm11$ vi 1234567890.12345
  
  コマンドの実行結果
  --------------------------------------------------
  1582年 本能寺の変
  1600年 関ヶ原の戦い
  1615年 大坂夏の陣
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ mkisofs -o history-cdrom1.iso history (CD-ROM でISOイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  I: -input-charset not specified, using utf-8 (detected in locale settings)
  Total translation table size: 0
  Total rockridge attributes bytes: 0
  Total directory bytes: 0
  Path table size(bytes): 10
  Max brk space used 0
  175 extents written (0 MB)
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ mkisofs -o history-cdrom2.iso -r(-R) history (LongName、CD-ROM でISOイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  I: -input-charset not specified, using utf-8 (detected in locale settings)
  Total translation table size: 0
  Total rockridge attributes bytes: 257
  Total directory bytes: 0
  Path table size(bytes): 10
  Max brk space used 0
  176 extents written (0 MB)
  --------------------------------------------------
  
  vm11$ cd /mnt
  vm11$ sudo mkdir cdrom1 cdrom2 (マウントポイント作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mount -r -t iso9660 history-cdrom1.iso /mnt/cdrom1 (CD-ROM用イメージを読取専用でマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo mount -r -t iso9660 history-cdrom2.iso /mnt/cdrom2 (CD-ROM用イメージを読取専用でマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                        MAJ:MIN  RM   SIZE  RO  TYPE  MOUNTPOINT
  vdb                         252:16    0     2G   0  disk  
   |-- vdb2                   252:18    0   975M   0  part  
   |-- vdb1                   252:17    0     1G   0  part  
  sr0                          11:0     1  1024M   0  rom   
  loop0                         7:0     0   350K   1  loop  /mnt/cdrom1 -> ISOイメージ
  loop1                         7:1     0   352K   1  loop  /mnt/cdrom2 -> ISOイメージ
  vda                         252:0     0    20G   0  disk  
   |-- vda1                   252:1     0     1G   0  part  /boot
   |-- vda2                   252:2     0    19G   0  part  
        |-- centos_vm11-root  253:0     0    17G   0  lvm   /
        |-- centos_vm11-swap  253:1     0     2G   0  lvm   [SWAP]
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ LANG=C df -mT (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  Filesystem                    Type      1M-blocks  Used  Available  Use%  Mounted on
  devtmpfs                      devtmpfs        947     0        947    0%  /dev
  tmpfs                         tmpfs           969     0        969    0%  /dev/shm
  tmpfs                         tmpfs           969     1        968    1%  /run
  tmpfs                         tmpfs           969     0        969    0%  /sys/fs/cgroup
  /dev/mapper/centos_vm11-root  xfs           17394  6439      10956   38%  /
  /dev/vda1                     xfs            1014   199        816   20%  /boot
  tmpfs                         tmpfs           114     0        114    0%  /run/user/1000
  /dev/loop0                    iso9660           1     1          0  100%  /mnt/cdrom1 -> ISOイメージ
  /dev/loop1                    iso9660           1     1          0  100%  /mnt/cdrom2 -> ISOイメージ
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ ls -lh /mnt/cdrom[1-2]/ (CD-ROMイメージを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  // cdrom1 -> ファイル名が「8.3」形式に制限
  -r-xr-xr-x. 1 root root 75  4月 18 11:00 12345678.123
  
  // cdrom2
  -r--r--r--. 1 root root 75  4月 18 11:00 1234567890.12345
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ cat /mnt/cdrom[1-2]/* (ファイル内容を確認)
  
  コマンドの実行結果
  --------------------------------------------------
  // 12345678.123
  1582年 本能寺の変
  1600年 関ヶ原の戦い
  1615年 大坂夏の陣
  
  // 1234567890.12345
  1582年 本能寺の変
  1600年 関ヶ原の戦い
  1615年 大坂夏の陣
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ sudo umount /mnt/cdrom1 /mnt/cdrom2
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm11$ cd $HOME
  vm11$ rm -f *.iso (ISOイメージファイル削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[19]
  CD/DVD作成 - 02
  
[内容]
  ## 作業内容
    DVD-ROMイメージ(ISO9660)の作成を行い、システムにマウント後にチェックする
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド(mkisofs)
    mkisofs -b     // ブート可能CD
    mkisofs -o XX  // イメージファイル(XX)を作成
    mkisofs -J     // Windows
    mkisofs -r(R)  // LongName
    mkisofs -udf   // DVD
  
[確認]
  vm12$ cd $HOME
  vm12$ mkisofs -udf -o HISTORY-DVDROM1.iso HISTORY (DVD-ROM でISOイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  I: -input-charset not specified, using utf-8 (detected in locale settings)
  Total translation table size: 0
  Total rockridge attributes bytes: 0
  Total directory bytes: 0
  Path table size(bytes): 10
  Max brk space used 0
  419 extents written (0 MB)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ mkisofs -udf -o HISTORY-DVDROM2.iso -r(-R) HISTORY (LongName、DVD-ROM でISOイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  I: -input-charset not specified, using utf-8 (detected in locale settings)
  Total translation table size: 0
  Total rockridge attributes bytes: 257
  Total directory bytes: 0
  Path table size(bytes): 10
  Max brk space used 0
  420 extents written (0 MB)
  --------------------------------------------------
  
  vm12$ cd /mnt
  vm12$ sudo mkdir dvdrom1 dvdrom2 (マウントポイント作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mount -r -t iso9660 HISTORY-DVDROM1.iso /mnt/dvdrom1 (DVD-ROM用イメージを読取専用でマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  [ 7209.369367] Buffer I/O error on dev loop0, logical block 0, async page read
  [ 7209.372646] Buffer I/O error on dev loop0, logical block 0, async page read
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mount -r -t iso9660 HISTORY-DVDROM2.iso /mnt/dvdrom2 (DVD-ROM用イメージを読取専用でマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  [ 7237.076382] Buffer I/O error on dev loop1, logical block 0, async page read
  [ 7237.079664] Buffer I/O error on dev loop1, logical block 0, async page read
  [ 7237.083200] Buffer I/O error on dev loop1, logical block 0, async page read
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
  sr0                      11:0    1 1024M  0 rom  
  vda                     252:0    0   20G  0 disk 
  ├─vda1                252:1    0    1G  0 part /boot
  └─vda2                252:2    0   19G  0 part 
    ├─centos_vm11-root  253:0    0   17G  0 lvm  /
    └─centos_vm11-swap  253:1    0    2G  0 lvm  [SWAP]
  loop0                     7:0    0  838K  1 loop /mnt/dvdrom1
  loop1                     7:1    0  840K  1 loop /mnt/dvdrom2
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ df -mT (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  ファイルシス                 タイプ   1M-ブロック  使用 使用可 使用% マウント位置
  devtmpfs                     devtmpfs         484     0    484    0% /dev
  tmpfs                        tmpfs            496     0    496    0% /dev/shm
  tmpfs                        tmpfs            496     7    489    2% /run
  tmpfs                        tmpfs            496     0    496    0% /sys/fs/cgroup
  /dev/mapper/centos_vm11-root xfs            17394  1386  16009    8% /
  /dev/vda1                    xfs             1014   137    878   14% /boot
  tmpfs                        tmpfs            100     0    100    0% /run/user/1000
  /dev/loop0                   iso9660            1     1      0  100% /mnt/dvdrom1
  /dev/loop1                   iso9660            1     1      0  100% /mnt/dvdrom2
  --------------------------------------------------

  vm12$ cd $HOME
  vm12$ ls -lh /mnt/dvdrom[1-2]/ (DVD-ROMイメージを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  // dvdrom1 -> ファイル名が「8.3」形式に制限
  -r-xr-xr-x. 1 root root 75  2月 13 16:20 12345678.123
  
  // dvdrom2
  -r--r--r--. 1 root root 75  2月 13 16:20 1234567890.12345
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ cat /mnt/dvdrom[1-2]/* (ファイル内容を確認)
  
  コマンドの実行結果
  --------------------------------------------------
  // 12345678.123
  1582年 本能寺の変
  1600年 関ヶ原の戦い
  1615年 大坂夏の陣
  
  // 1234567890.12345
  1582年 本能寺の変
  1600年 関ヶ原の戦い
  1615年 大坂夏の陣
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo umount /mnt/dvdrom1 /mnt/dvdrom2
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ rm -f *.iso (ISOイメージファイル削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[20]
  暗号化デバイス
  
[内容]
  ## 作業内容
    暗号化デバイスにファイルシステムを作成する
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
[確認]
  vm12$ cd $HOME
  vm12$ sudo yum -y install cryptsetup (パッケージ追加)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo cryptsetup create sec0(暗号化デバイス名) /dev/loop0 (ループバックデバイスを暗号化デバイスに変換)
  
  コマンドの実行結果
  --------------------------------------------------
  Enter passphrase for /home/makoto/image0.img: (mikotoと入力)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                    MAJ:MIN RM  SIZE RO TYPE  MOUNTPOINT
  sr0                      11:0    1 1024M  0 rom   
  loop0                     7:0    0  100M  0 loop  
  └─sec0                253:2    0  100M  0 crypt (暗号化デバイス)
  vda                     252:0    0   20G  0 disk  
  ├─vda2                252:2    0   19G  0 part  
  │ ├─centos_vm11-swap 253:1    0    2G  0 lvm   [SWAP]
  │ └─centos_vm11-root 253:0    0   17G  0 lvm   /
  └─vda1                252:1    0    1G  0 part  /boot
  --------------------------------------------------
  
  vm12$ cd /dev/mapper
  vm12$ ls -lh (暗号化デバイスへのアクセスを調査)
  
  コマンドの実行結果
  --------------------------------------------------
  lrwxrwxrwx. 1 root root       7 12月 28 06:57 centos_vm11-root -> ../dm-0
  lrwxrwxrwx. 1 root root       7 12月 28 06:57 centos_vm11-swap -> ../dm-1
  crw-------. 1 root root 10, 236 12月 28 06:57 control
  lrwxrwxrwx. 1 root root       7 12月 28 15:32 sec0 -> ../dm-2 (アクセスは「/dev/mapper/sec0」でOK)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t xfs /dev/mapper/sec0 (暗号化デバイスにファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  meta-data=/dev/mapper/sec0       isize=512    agcount=4, agsize=6400 blks
           =                       sectsz=512   attr=2, projid32bit=1
           =                       crc=1        finobt=0, sparse=0
  data     =                       bsize=4096   blocks=25600, imaxpct=25
           =                       sunit=0      swidth=0 blks
  naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
  log      =internal log           bsize=4096   blocks=855, version=2
           =                       sectsz=512   sunit=0 blks, lazy-count=1
  realtime =none                   extsz=4096   blocks=0, rtextents=0
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mount -o defaults -t xfs /dev/mapper/sec0 /mnt (暗号化デバイスをマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  [31653.681464] XFS (dm-2): Mounting V5 Filesystem
  [31653.738944] XFS (dm-2): Ending clean mount
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                    MAJ:MIN RM  SIZE RO TYPE  MOUNTPOINT
  sr0                      11:0    1 1024M  0 rom   
  loop0                     7:0    0  100M  0 loop  
  └─sec0                253:2    0  100M  0 crypt /mnt (暗号化デバイス)
  vda                     252:0    0   20G  0 disk  
  ├─vda2                252:2    0   19G  0 part  
  │ ├─centos_vm11-swap 253:1    0    2G  0 lvm   [SWAP]
  │ └─centos_vm11-root 253:0    0   17G  0 lvm   /
  └─vda1                252:1    0    1G  0 part  /boot
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ df -mT (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  ファイルシス                 タイプ   1M-ブロック  使用 使用可 使用% マウント位置
  devtmpfs                     devtmpfs         466     0    466    0% /dev
  tmpfs                        tmpfs            489     0    489    0% /dev/shm
  tmpfs                        tmpfs            489     7    482    2% /run
  tmpfs                        tmpfs            489     0    489    0% /sys/fs/cgroup
  tmpfs                        tmpfs             98     0     98    0% /run/user/1000
  /dev/mapper/centos_vm11-root xfs            17394  5500  11895   32% /
  /dev/vda1                    xfs             1014   188    827   19% /boot
  /dev/mapper/sec0             xfs               97     6     92    6% /mnt (暗号化デバイス)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ mount | grep sec0 (マウント状況およびマウントオプションを確認)
  
  コマンドの実行結果
  --------------------------------------------------
  /dev/mapper/sec0 on /mnt type xfs (rw,relatime,seclabel,attr2,inode64,noquota)
  --------------------------------------------------
  
  vm12$ cd /mnt
  vm12$ sudo cp -p HISTORY/*.txt /mnt/ (前記録で作成したファイルを暗号化デバイスにコピー)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd /mnt
  vm12$ ls -lh (暗号化デバイスにコピーが成功しているか確認)
  
  コマンドの実行結果
  --------------------------------------------------
  -rw-rw-r--. 1 makoto makoto 75 12月 28 11:10 AAA.txt
  -rw-rw-r--. 1 makoto makoto 72 12月 28 11:11 BBB.txt
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo umount /mnt (暗号化デバイスをアンマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  [32478.990896] XFS (dm-2): Unmounting Filesystem
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo cryptsetup remove sec0 (暗号化デバイスからループバックデバイスに戻す)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[21]
  スーパーブロック
  
[内容]
  ## 作業内容
    ファイルシステム(ext2,ext3,ext4)のスーパーブロックを調査する
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
[確認]
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t ext4 /dev/loop0 (ファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  mke2fs 1.42.9 (28-Dec-2013)
  Discarding device blocks: done                            
  Filesystem label=
  OS type: Linux
  Block size=1024 (log=0)
  Fragment size=1024 (log=0)
  Stride=0 blocks, Stripe width=0 blocks
  25688 inodes, 102400 blocks
  5120 blocks (5.00%) reserved for the super user
  First data block=1  // スーパーブロック
  Maximum filesystem blocks=33685504
  13 block groups
  8192 blocks per group, 8192 fragments per group
  1976 inodes per group
  Superblock backups stored on blocks: 
   8193, 24577, 40961, 57345, 73729  // スーパーブロックのバックアップ
  
  Allocating group tables: done                            
  Writing inode tables: done                            
  Creating journal (4096 blocks): done
  Writing superblocks and filesystem accounting information: done 
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo dumpe2fs /dev/loop0 | grep -i superblock (スーパーブロック確認)
  
  コマンドの実行結果
  --------------------------------------------------
  Primary superblock at 1, Group descriptors at 2-2
  Backup superblock at 8193, Group descriptors at 8194-8194
  Backup superblock at 24577, Group descriptors at 24578-24578
  Backup superblock at 40961, Group descriptors at 40962-40962
  Backup superblock at 57345, Group descriptors at 57346-57346
  Backup superblock at 73729, Group descriptors at 73730-73730
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[22]
  ファイルシステムチェック - 01 (fsck)
  
[内容]
  ## 作業内容
    ファイルシステムチェックを行う (アンマウントまたは読取専用マウントの状態でないとファイルシステムが壊れる)
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド(fsck)
    fsck -r     // 対話的に修復を実行
    fsck -t XX  // ファイルシステム種類(XX)のみ実行
    fsck -A     // ファイル「/etc/fstab」の全ファイルシステムに実行
    fsck -N     // 動作のシミュレートのみ
  
[確認]
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t ext4 /dev/loop0 (ファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo fsck -t ext4 /dev/loop0 (ファイルシステムチェック)
  
  コマンドの実行結果
  --------------------------------------------------
  fsck from util-linux 2.23.2
  e2fsck 1.42.9 (28-Dec-2013)
  /dev/loop0: clean, 11/25688 files, 8896/102400 blocks  // 異常なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[23]
  ファイルシステムチェック - 02 (e2fsck)
  
[内容]
  ## 作業内容
    ファイルシステムチェックを行う (アンマウントまたは読取専用マウントの状態でないとファイルシステムが壊れる)
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド(e2fsck)
    e2fsck -b XX  // 指定したスーパーブロックのバックアップ(XX)を使用してファイルシステム復元
    e2fsck -c     // 不良ブロックをチェック
    e2fsck -f     // ファイルシステムが「clean」でもチェック
    e2fsck -p     // 不良ブロックを自動的に修復
    e2fsck -y     // 問合せに「yes」と回答
    e2fsck -n     // 問合せに「no」と回答
  
[確認]
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t ext4 /dev/loop0 (ファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo dumpe2fs /dev/loop0 | grep -i superblock (スーパーブロック確認)
  
  コマンドの実行結果
  --------------------------------------------------
  Primary superblock at 1, Group descriptors at 2-2
  Backup superblock at 8193, Group descriptors at 8194-8194
  Backup superblock at 24577, Group descriptors at 24578-24578
  Backup superblock at 40961, Group descriptors at 40962-40962
  Backup superblock at 57345, Group descriptors at 57346-57346
  Backup superblock at 73729, Group descriptors at 73730-73730
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo e2fsck /dev/loop0 (ファイルシステムチェック)
  
  コマンドの実行結果
  --------------------------------------------------
  e2fsck 1.42.9 (28-Dec-2013)
  /dev/loop0: clean, 11/25688 files, 8896/102400 blocks
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo e2fsck -c /dev/loop0 (不良ブロックのチェック)
  
  コマンドの実行結果
  --------------------------------------------------
  e2fsck 1.42.9 (28-Dec-2013)
  Checking for bad blocks (read-only test): 0.00% done, 0:00 elapsed. (0/0/0 errdone                                                 
  /dev/loop0: Updating bad block inode.
  Pass 1: Checking inodes, blocks, and sizes
  Pass 2: Checking directory structure
  Pass 3: Checking directory connectivity
  Pass 4: Checking reference counts
  Pass 5: Checking group summary information
  
  /dev/loop0: ***** FILE SYSTEM WAS MODIFIED *****
  /dev/loop0: 11/25688 files (9.1% non-contiguous), 8896/102400 blocks
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo e2fsck -b 8193 /dev/loop0 (スーパーブロックのバックアップ「8193」を使用してファイルシステム修復)
  
  コマンドの実行結果
  --------------------------------------------------
  e2fsck 1.42.9 (28-Dec-2013)
  /dev/loop0 was not cleanly unmounted, check forced.
  Pass 1: Checking inodes, blocks, and sizes
  Pass 2: Checking directory structure
  Pass 3: Checking directory connectivity
  Pass 4: Checking reference counts
  Pass 5: Checking group summary information
  
  /dev/loop0: ***** FILE SYSTEM WAS MODIFIED *****
  /dev/loop0: 11/25688 files (9.1% non-contiguous), 8896/102400 blocks
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[24]
  ファイルシステムチェック - 03 (xfs_repair)
  
[内容]
  ## 作業内容
    ファイルシステムチェックを行う (アンマウントまたは読取専用マウントの状態でないとファイルシステムが壊れる)
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド(xfs_repair)
    xfs_repair XX     // デバイス(XX)のファイルシステムチェックと修復
    xfs_repair -n XX  // デバイス(XX)のファイルシステムチェックのみ
  
[確認]
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t xfs /dev/loop0 (ファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo xfs_repair -n /dev/loop0 (ファイルシステムチェック)
  
  コマンドの実行結果
  --------------------------------------------------
  Phase 1 - find and verify superblock...
  Phase 2 - using internal log
          - zero log...
          - scan filesystem freespace and inode maps...
          - found root inode chunk
  Phase 3 - for each AG...
          - scan (but don't clear) agi unlinked lists...
          - process known inodes and perform inode discovery...
          - agno = 0
          - agno = 1
          - agno = 2
          - agno = 3
          - process newly discovered inodes...
  Phase 4 - check for duplicate blocks...
          - setting up duplicate extent list...
          - check for inodes claiming duplicate blocks...
          - agno = 0
          - agno = 1
          - agno = 2
          - agno = 3
  No modify flag set, skipping phase 5
  Phase 6 - check inode connectivity...
          - traversing filesystem ...
          - traversal finished ...
          - moving disconnected inodes to lost+found ...
  Phase 7 - verify link counts...
  No modify flag set, skipping filesystem flush and exiting.
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[25]
  ファイルシステム管理(ext2,ext3,ext4) - 01 (tune2fs)
  
[内容]
  ## 作業内容
    ファイルシステム管理を行う
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド(tune2fs)
    tune2fs -c XX  // 最大マウント回数(XX)でファイルシステムチェック -> 0はチェックしない
    tune2fs -C XX  // 現在のマウント回数を設定
    tune2fs -i XX  // ファイルシステムチェック間隔(XX日) -> 0はチェックしない
    tune2fs -j     // ext2からext3に変換
    tune2fs -m XX  // root用の管理領域の割合
    tune2fs -l     // スーパーブロック内容を表示
    tune2fs -L XX  // ファイルシステムのボリュームラベル(XX)
    tune2fs -U XX  // UUID(XX)
  
[確認]
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t ext2 /dev/loop0 (ファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo tune2fs -j /dev/loop0 (ext2 -> ext3)
  
  コマンドの実行結果
  --------------------------------------------------
  tune2fs 1.42.9 (28-Dec-2013)
  Creating journal inode: done
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo tune2fs -m 1 /dev/loop0 (管理領域の割合を1%に変更)
  
  コマンドの実行結果
  --------------------------------------------------
  tune2fs 1.42.9 (28-Dec-2013)
  Setting reserved blocks percentage to 1% (1024 blocks)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo tune2fs -l /dev/loop0 (スーパーブロックの内容を表示)
  
  コマンドの実行結果
  --------------------------------------------------
  tune2fs 1.42.9 (28-Dec-2013)
  Filesystem volume name:   <none>
  Last mounted on:          <not available>
  Filesystem UUID:          d91fda70-f127-4299-9973-758a316172c8
  Filesystem magic number:  0xEF53
  Filesystem revision #:    1 (dynamic)
  Filesystem features:      has_journal ext_attr resize_inode dir_index filetype sparse_super
  Filesystem flags:         signed_directory_hash 
  Default mount options:    user_xattr acl
  Filesystem state:         clean
  Errors behavior:          Continue
  Filesystem OS type:       Linux
  Inode count:              25688
  Block count:              102400
  Reserved block count:     1024
  Free blocks:              93487
  Free inodes:              25677
  First block:              1
  Block size:               1024
  Fragment size:            1024
  Reserved GDT blocks:      256
  Blocks per group:         8192
  Fragments per group:      8192
  Inodes per group:         1976
  Inode blocks per group:   247
  Filesystem created:       Tue Dec 28 22:37:45 2021
  Last mount time:          n/a
  Last write time:          Tue Dec 28 22:38:50 2021
  Mount count:              0
  Maximum mount count:      -1
  Last checked:             Tue Dec 28 22:37:45 2021
  Check interval:           0 (<none>)
  Reserved blocks uid:      0 (user root)
  Reserved blocks gid:      0 (group root)
  First inode:              11
  Inode size:               128
  Journal inode:            8
  Default directory hash:   half_md4
  Directory Hash Seed:      0a04640e-5731-47c5-b94a-ee342dc76647
  Journal backup:           inode blocks
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo tune2fs -L AAA /dev/loop0 (ボリュームラベルを「AAA」に変更)
  
  コマンドの実行結果
  --------------------------------------------------
  tune2fs 1.42.9 (28-Dec-2013) -> 上記スーパーブロックの「Filesystem volume name」に更新された
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[26]
  ファイルシステム管理(ext2,ext3,ext4) - 02 (badblocks)
  
[内容]
  ## 作業内容
    ファイルシステム管理を行う
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド(badblocks)
    badblocks -b XX  // ブロックサイズ(XX)を指定
    badblocks -o XX  // 結果をファイル(XX)に出力
    badblocks -w     // 書込モードでテスト -> ファイルシステム破壊？
  
[確認]
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10 (ディスクイメージ作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img (ディスクイメージとループバックデバイスを紐づけ)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t ext4 /dev/loop0 (ファイルシステム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo badblocks -b 1024 /dev/loop0 (不良ブロックの検索)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D (ループバックデバイスとディスクイメージの紐づけ解除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ rm -f image0.img (ディスクイメージ削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[27]
  ファイルシステム管理(ext2,ext3,ext4) - 03 (debugfs)
  
[内容]
  ## 作業内容
    ファイルシステム管理を行う
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド(debugfs)
    debugfs -w     // 書込可能モードでファイルシステムを開く(デフォルトは読取専用)
    debugfs -s XX  // スーパーブロック(XX)を指定
  
[確認]
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img
  
  コマンドの実行結果
  --------------------------------------------------
  [  374.253452] loop: module loaded
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t ext4 /dev/loop0
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mount -o defaults -t ext4 /dev/loop0 /mnt
  
  コマンドの実行結果
  --------------------------------------------------
  [  446.666095] EXT4-fs (loop0): mounted filesystem with ordered data mode. Opts: (null)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
  sr0                      11:0    1 1024M  0 rom  
  loop0                     7:0    0  100M  0 loop /mnt (マウントしたデバイス)
  vda                     252:0    0   20G  0 disk 
  ├─vda2                252:2    0   19G  0 part 
  │ ├─centos_vm11-swap 253:1    0    2G  0 lvm  [SWAP]
  │ └─centos_vm11-root 253:0    0   17G  0 lvm  /
  └─vda1                252:1    0    1G  0 part /boot
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo cp -pr HISTORY /mnt

  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo debugfs -w /dev/loop0 (書込可能モードで実行)
  
  コマンドの実行結果
  --------------------------------------------------
  debugfs 1.42.9 (28-Dec-2013)
  
  ## サブコマンド「ls」
  debugfs:  ls
  2  (12) .    2  (12) ..    11  (20) lost+found    12  (980) HISTORY
  
  ## サブコマンド「cd」
  debugfs:  cd HISTORY
  (出力なし)
  
  ## サブコマンド「ls」
  debugfs:  ls
  12  (12) .    2  (12) ..    13  (16) AAA.txt    14  (984) BBB.txt
  
  ## サブコマンド「cat」
  debugfs:  cat AAA.txt
  
  1582年 本能寺の変
  1600年 関ヶ原の戦い
  1615年 大坂夏の陣
  
  ## サブコマンド「mkdir」
  debugfs:  mkdir CCC
  (出力なし)

  ## サブコマンド「quit」
  debugfs:  quit
  (OSプロンプトに戻る)
  --------------------------------------------------
  
  vm12$ cd /mnt/HISTORY
  vm12$ ls -lh

  コマンドの実行結果
  --------------------------------------------------
  -rw-rw-r--. 1 makoto makoto   75 12月 28 11:10 AAA.txt
  -rw-rw-r--. 1 makoto makoto   72 12月 28 11:11 BBB.txt
  drwxr-xr-x. 2 root   root   1.0K 12月 29 08:02 CCC (コマンド内部で作成されたディレクトリ)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo umount /mnt
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  ディスクイメージ削除
  vm12$ cd $HOME
  vm12$ rm -f loop0.img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[28]
  S.M.A.R.T
  
[内容]
  ## 作業内容
    HDDの自己診断
  
  ## 使用マシン
    HOST : localhost
    IPV4 : 192.168.1.3
    MEMO : ホスト
  
  ## コマンド(smartctl)
    smartctl -a  // 自己診断情報(SMART)を表示
    smartctl -t  // セルフテスト実施
    smartctl -l  // ログタイプ指定
    smartctl -H  // 状態を表示
  
[確認]
  $ cd $HOME
  $ sudo yum -y install smartmontools (パッケージ追加)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  $ cd $HOME
  $ lsblk (ブロックデバイス表示)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME              MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
  sda                 8:0    0 465.8G  0 disk 
  ├─sda1            8:1    0     1G  0 part /boot
  └─sda2            8:2    0 464.8G  0 part 
    ├─centos-root 253:0    0    50G  0 lvm  /
    ├─centos-swap 253:1    0   3.6G  0 lvm  [SWAP]
    └─centos-home 253:2    0 411.1G  0 lvm  /home
  sr0                11:0    1  1024M  0 rom  
  loop0               7:0    0  99.4M  1 loop /var/lib/snapd/snap/core/11993
  loop1               7:1    0 104.6M  1 loop /var/lib/snapd/snap/brackets/138
  --------------------------------------------------
  
  $ cd $HOME
  $ sudo smartctl -a /dev/sda (自己診断情報を表示)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 表示項目が多過ぎて理解不能
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[29]
  ファイルシステム管理(xfs) - 01 (xfs_admin)
  
[内容]
  ## 作業内容
    ファイルシステム管理を行う
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド(xfs_admin)
    xfs_admin -u     // UUID表示
    xfs_admin -U XX  // UUID(XX)を設定
    xfs_admin -l     // ラベル表示
    xfs_admin -L XX  // ラベル(XX)を設定
  
[確認]
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t xfs /dev/loop0
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mount -o defaults -t xfs /dev/loop0 /mnt
  
  コマンドの実行結果
  --------------------------------------------------
  [12827.378007] XFS (loop0): Mounting V5 Filesystem
  [12827.392257] XFS (loop0): Ending clean mount
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
  sr0                      11:0    1 1024M  0 rom  
  loop0                     7:0    0  100M  0 loop /mnt (マウントしたデバイス)
  vda                     252:0    0   20G  0 disk 
  ├─vda2                252:2    0   19G  0 part 
  │ ├─centos_vm11-swap 253:1    0    2G  0 lvm  [SWAP]
  │ └─centos_vm11-root 253:0    0   17G  0 lvm  /
  └─vda1                252:1    0    1G  0 part /boot
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo xfs_info /dev/loop0 (ファイルシステムの情報)
  
  コマンドの実行結果
  --------------------------------------------------
  meta-data=/dev/loop0             isize=512    agcount=4, agsize=6400 blks
           =                       sectsz=512   attr=2, projid32bit=1
           =                       crc=1        finobt=0 spinodes=0
  data     =                       bsize=4096   blocks=25600, imaxpct=25
           =                       sunit=0      swidth=0 blks
  naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
  log      =internal               bsize=4096   blocks=855, version=2
           =                       sectsz=512   sunit=0 blks, lazy-count=1
  realtime =none                   extsz=4096   blocks=0, rtextents=0
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo xfs_admin -u /dev/loop0 (UUID表示)
  
  コマンドの実行結果
  --------------------------------------------------
  UUID  = c8a1b744-d0c4-47e0-85bf-410e46e371d4
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo xfs_admin -l /dev/loop0 (ラベル表示)
  
  コマンドの実行結果
  --------------------------------------------------
  label = ""
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo umount /mnt
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  ディスクイメージ削除
  vm12$ cd $HOME
  vm12$ rm -f image0.img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[30]
  ファイルシステム管理(xfs) - 02 (xfs_info)
  
[内容]
  ## 作業内容
    ファイルシステム管理を行う
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
[確認]
  上記の「29」を参照
  
================================================================================
[31]
  ファイルシステム管理(xfs) - 03 (xfsdump)
  
[内容]
  ## 作業内容
    ファイルシステム管理を行う
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド(xfsdump)
    xfsdump -f XX  // 出力ファイル名(XX)を指定
    xfsdump -l XX  // ダンプレベル(XX 0-9)を指定
    xfsdump -J     // ダンプ情報データベース更新しない
  
[確認]
  vm12$ cd $HOME
  vm12$ sudo yum -y install xfsdump
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10
  vm12$ dd if=/dev/zero of=image1.img bs=10M count=10
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img
  vm12$ sudo losetup /dev/loop1 image1.img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t xfs /dev/loop0
  vm12$ sudo mkfs -t xfs /dev/loop1
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mount -o defaults -t xfs /dev/loop0 /mnt/mp0
  vm12$ sudo mount -o defaults -t xfs /dev/loop1 /mnt/mp1
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ lsblk (ブロックデバイス確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
  sr0                      11:0    1 1024M  0 rom  
  loop0                     7:0    0  100M  0 loop /mnt/mp0 (マウントしたデバイス)
  loop1                     7:1    0  100M  0 loop /mnt/mp1 (マウントしたデバイス)
  vda                     252:0    0   20G  0 disk 
  ├─vda2                252:2    0   19G  0 part 
  │ ├─centos_vm11-swap 253:1    0    2G  0 lvm  [SWAP]
  │ └─centos_vm11-root 253:0    0   17G  0 lvm  /
  └─vda1                252:1    0    1G  0 part /boot
  --------------------------------------------------
  
  vm12$ cd /mnt/mp0
  vm12$ sudo vi ALPHABET.txt
  
  コマンドの実行結果
  --------------------------------------------------
  AAA AAA AAA
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo xfsdump -f loop0-level0.dmp -l 0 /mnt/mp0 (完全バックアップ)
  
  コマンドの実行結果
  --------------------------------------------------
  xfsdump: using file dump (drive_simple) strategy
  xfsdump: version 3.1.7 (dump format 3.0) - type ^C for status and control
  
  // セッションラベル入力
  please enter label for this dump session (timeout in 300 sec)
  -> AAA
  session label entered: "AAA"
  
  xfsdump: level 0 dump of vm12:/mnt/mp0
  xfsdump: dump date: Wed Dec 29 13:23:40 2021
  xfsdump: session id: 971e925f-14f8-423b-ab09-001efa4275bc
  xfsdump: session label: "AAA"
  xfsdump: ino map phase 1: constructing initial dump list
  xfsdump: ino map phase 2: skipping (no pruning necessary)
  xfsdump: ino map phase 3: skipping (only one dump stream)
  xfsdump: ino map construction complete
  xfsdump: estimated dump size: 25216 bytes
  xfsdump: /var/lib/xfsdump/inventory created
  
  // メディアラベル入力
  please enter label for media in drive 0 (timeout in 300 sec)
  -> AAA
  media label entered: "AAA"
  
  xfsdump: creating dump session media file 0 (media 0, file 0)
  xfsdump: dumping ino map
  xfsdump: dumping directories
  xfsdump: dumping non-directory files
  xfsdump: ending media file
  xfsdump: media file size 22216 bytes
  xfsdump: dump size (non-dir files) : 544 bytes
  xfsdump: dump complete: 50 seconds elapsed
  xfsdump: Dump Summary:
  xfsdump:   stream 0 /home/makoto/loop0-level0.dmp OK (success)
  xfsdump: Dump Status: SUCCESS
  --------------------------------------------------
  
  vm12$ cd /mnt/mp0
  vm12$ sudo vi ALPHABET.txt
  
  コマンドの実行結果
  --------------------------------------------------
  AAA AAA AAA
  BBB BBB BBB (追加)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo xfsdump -f loop0-level1.dmp -l 1 /mnt/mp0 (増分バックアップ)
  
  コマンドの実行結果
  --------------------------------------------------
  xfsdump: using file dump (drive_simple) strategy
  xfsdump: version 3.1.7 (dump format 3.0) - type ^C for status and control
  
  // セッションラベル入力
  please enter label for this dump session (timeout in 300 sec)
  -> BBB
  session label entered: "BBB"
  
  xfsdump: level 1 incremental dump of vm12:/mnt/mp0 based on level 0 dump begun Wed Dec 29 13:23:40 2021
  xfsdump: dump date: Wed Dec 29 13:30:44 2021
  xfsdump: session id: bec38c3b-ac09-471f-8444-e81fbca11cd3
  xfsdump: session label: "BBB"
  xfsdump: ino map phase 1: constructing initial dump list
  xfsdump: ino map phase 2: skipping (no pruning necessary)
  xfsdump: ino map phase 3: skipping (only one dump stream)
  xfsdump: ino map construction complete
  xfsdump: estimated dump size: 25216 bytes
  
  // メディアラベル入力
  please enter label for media in drive 0 (timeout in 300 sec)
  -> BBB
  media label entered: "BBB"
  
  xfsdump: creating dump session media file 0 (media 0, file 0)
  xfsdump: dumping ino map
  xfsdump: dumping directories
  xfsdump: dumping non-directory files
  xfsdump: ending media file
  xfsdump: media file size 22216 bytes
  xfsdump: dump size (non-dir files) : 544 bytes
  xfsdump: dump complete: 8 seconds elapsed
  xfsdump: Dump Summary:
  xfsdump:   stream 0 /home/makoto/loop0-level1.dmp OK (success)
  xfsdump: Dump Status: SUCCESS
  --------------------------------------------------
  
  vm12$ cd /mnt/mp0
  vm12$ sudo vi ALPHABET.txt
  
  コマンドの実行結果
  --------------------------------------------------
  AAA AAA AAA
  BBB BBB BBB
  CCC CCC CCC (追加)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo xfsdump -f loop0-level2.dmp -l 2 /mnt/mp0 (増分バックアップ)
  
  コマンドの実行結果
  --------------------------------------------------
  xfsdump: using file dump (drive_simple) strategy
  xfsdump: version 3.1.7 (dump format 3.0) - type ^C for status and control
  
  // セッションラベル入力
  please enter label for this dump session (timeout in 300 sec)
  -> CCC
  session label entered: "CCC"
  
  xfsdump: level 2 incremental dump of vm12:/mnt/mp0 based on level 1 dump begun Wed Dec 29 13:30:44 2021
  xfsdump: dump date: Wed Dec 29 13:35:16 2021
  xfsdump: session id: f56b1cc9-fc60-4b28-a44f-937a986d4a8f
  xfsdump: session label: "CCC"
  xfsdump: ino map phase 1: constructing initial dump list
  xfsdump: ino map phase 2: skipping (no pruning necessary)
  xfsdump: ino map phase 3: skipping (only one dump stream)
  xfsdump: ino map construction complete
  xfsdump: estimated dump size: 25216 bytes
  
  // メディアラベル入力
  please enter label for media in drive 0 (timeout in 300 sec)
  -> CCC
  media label entered: "CCC"
  
  xfsdump: creating dump session media file 0 (media 0, file 0)
  xfsdump: dumping ino map
  xfsdump: dumping directories
  xfsdump: dumping non-directory files
  xfsdump: ending media file
  xfsdump: media file size 22216 bytes
  xfsdump: dump size (non-dir files) : 544 bytes
  xfsdump: dump complete: 5 seconds elapsed
  xfsdump: Dump Summary:
  xfsdump:   stream 0 /home/makoto/loop0-level2.dmp OK (success)
  xfsdump: Dump Status: SUCCESS
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ ls -lh | grep loop0-level (バックアップファイル確認)
  
  コマンドの実行結果
  --------------------------------------------------
  -rw-r--r--. 1 root   root    22K 12月 29 13:24 loop0-level0.dmp
  -rw-r--r--. 1 root   root    22K 12月 29 13:30 loop0-level1.dmp
  -rw-r--r--. 1 root   root    22K 12月 29 13:35 loop0-level2.dmp
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo xfsrestore -r -f loop0-level0.dmp /mnt/mp1 (完全バックアップを別ファイルシステムにレストア)
  
  コマンドの実行結果
  --------------------------------------------------
  xfsrestore: using file dump (drive_simple) strategy
  xfsrestore: version 3.1.7 (dump format 3.0) - type ^C for status and control
  xfsrestore: searching media for dump
  xfsrestore: examining media file 0
  xfsrestore: dump description: 
  xfsrestore: hostname: vm12
  xfsrestore: mount point: /mnt/mp0
  xfsrestore: volume: /dev/loop0
  xfsrestore: session time: Wed Dec 29 13:23:40 2021
  xfsrestore: level: 0
  xfsrestore: session label: "AAA" // 入力したセッションラベル
  xfsrestore: media label: "AAA" // 入力したメディアラベル
  xfsrestore: file system id: 99362101-932b-407b-9b00-39a7b9a63bb0
  xfsrestore: session id: 971e925f-14f8-423b-ab09-001efa4275bc
  xfsrestore: media id: 6f4f746b-51e8-4cac-acd2-4f366877220d
  xfsrestore: using online session inventory
  xfsrestore: searching media for directory dump
  xfsrestore: reading directories
  xfsrestore: 1 directories and 1 entries processed
  xfsrestore: directory post-processing
  xfsrestore: restoring non-directory files
  xfsrestore: restore complete: 0 seconds elapsed
  xfsrestore: Restore Summary:
  xfsrestore:   stream 0 /home/makoto/loop0-level0.dmp OK (success)
  xfsrestore: Restore Status: SUCCESS
  --------------------------------------------------
  
  vm12$ cd /mnt/mp1
  vm12$ cat ALPHABET.txt
  
  コマンドの実行結果
  --------------------------------------------------
  AAA AAA AAA
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo xfsrestore -r -f loop0-level1.dmp /mnt/mp1 (増分バックアップを別ファイルシステムにレストア)
  
  コマンドの実行結果
  --------------------------------------------------
  xfsrestore: using file dump (drive_simple) strategy
  xfsrestore: version 3.1.7 (dump format 3.0) - type ^C for status and control
  xfsrestore: searching media for dump
  xfsrestore: examining media file 0
  xfsrestore: dump description: 
  xfsrestore: hostname: vm12
  xfsrestore: mount point: /mnt/mp0
  xfsrestore: volume: /dev/loop0
  xfsrestore: session time: Wed Dec 29 13:30:44 2021
  xfsrestore: level: 1
  xfsrestore: session label: "BBB" // 入力したセッションラベル
  xfsrestore: media label: "BBB" // 入力したメディアラベル
  xfsrestore: file system id: 99362101-932b-407b-9b00-39a7b9a63bb0
  xfsrestore: session id: bec38c3b-ac09-471f-8444-e81fbca11cd3
  xfsrestore: media id: 4c4c071b-23a8-43db-9c3b-bfbb25cb8060
  xfsrestore: using online session inventory
  xfsrestore: searching media for directory dump
  xfsrestore: reading directories
  xfsrestore: 1 directories and 1 entries processed
  xfsrestore: directory post-processing
  xfsrestore: restoring non-directory files
  xfsrestore: restore complete: 0 seconds elapsed
  xfsrestore: Restore Summary:
  xfsrestore:   stream 0 /home/makoto/loop0-level1.dmp OK (success)
  xfsrestore: Restore Status: SUCCESS
  --------------------------------------------------
  
  vm12$ cd /mnt/mp1
  vm12$ cat ALPHABET.txt
  
  コマンドの実行結果
  --------------------------------------------------
  AAA AAA AAA
  BBB BBB BBB
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo xfsrestore -r -f loop0-level2.dmp /mnt/mp1 (増分バックアップを別ファイルシステムにレストア)
  
  コマンドの実行結果
  --------------------------------------------------
  xfsrestore: using file dump (drive_simple) strategy
  xfsrestore: version 3.1.7 (dump format 3.0) - type ^C for status and control
  xfsrestore: searching media for dump
  xfsrestore: examining media file 0
  xfsrestore: dump description: 
  xfsrestore: hostname: vm12
  xfsrestore: mount point: /mnt/mp0
  xfsrestore: volume: /dev/loop0
  xfsrestore: session time: Wed Dec 29 13:35:16 2021
  xfsrestore: level: 2
  xfsrestore: session label: "CCC" // 入力したセッションラベル
  xfsrestore: media label: "CCC" // 入力したメディアラベル
  xfsrestore: file system id: 99362101-932b-407b-9b00-39a7b9a63bb0
  xfsrestore: session id: f56b1cc9-fc60-4b28-a44f-937a986d4a8f
  xfsrestore: media id: 31b21bdd-0ed4-4bb2-8438-db565838c6ce
  xfsrestore: using online session inventory
  xfsrestore: searching media for directory dump
  xfsrestore: reading directories
  xfsrestore: 1 directories and 1 entries processed
  xfsrestore: directory post-processing
  xfsrestore: restoring non-directory files
  xfsrestore: restore complete: 1 seconds elapsed
  xfsrestore: Restore Summary:
  xfsrestore:   stream 0 /home/makoto/loop0-level2.dmp OK (success)
  xfsrestore: Restore Status: SUCCESS
  --------------------------------------------------
  
  vm12$ cd /mnt/mp1
  vm12$ cat ALPHABET.txt
  
  コマンドの実行結果
  --------------------------------------------------
  AAA AAA AAA
  BBB BBB BBB
  CCC CCC CCC
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ diff /mnt/mp0/ALPHABET.txt /mnt/mp1/ALPHABET.txt
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo umount /mnt/mp0
  vm12$ sudo umount /mnt/mp1
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  ディスクイメージ削除
  vm12$ cd $HOME
  vm12$ rm -f image[0-1].img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[32]
  ファイルシステム管理(xfs) - 04 (xfsrestore)
  
[内容]
  ## 作業内容
    ファイルシステム管理を行う
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## コマンド(xfsrestore)
    xfsrestore -f XX  // バックアップファイル(XX)を指定
    xfsrestore -S XX  // セッションID(XX)を指定
    xfsrestore -L XX  // セッションラベル(XX)を指定
    xfsrestore -r     // 増分バックアップからリストア
    xfsrestore -i     // 対話的にリストア
    xfsrestore -I     // 全ダンプのセッションIDとセッションラベルを表示
  
[確認]
  上記の「31」を参照
  
================================================================================
[33]
  ファイルシステム管理(xfs) - 05 (xfs_repair)
  
[内容]
  ## 作業内容
    ファイルシステム管理を行う
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
[確認]
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t xfs /dev/loop0
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo xfs_repair /dev/loop0
  
  コマンドの実行結果
  --------------------------------------------------
  Phase 1 - find and verify superblock...
  Phase 2 - using internal log
          - zero log...
          - scan filesystem freespace and inode maps...
          - found root inode chunk
  Phase 3 - for each AG...
          - scan and clear agi unlinked lists...
          - process known inodes and perform inode discovery...
          - agno = 0
          - agno = 1
          - agno = 2
          - agno = 3
          - process newly discovered inodes...
  Phase 4 - check for duplicate blocks...
          - setting up duplicate extent list...
          - check for inodes claiming duplicate blocks...
          - agno = 0
          - agno = 1
          - agno = 2
          - agno = 3
  Phase 5 - rebuild AG headers and trees...
          - reset superblock...
  Phase 6 - check inode connectivity...
          - resetting contents of realtime bitmap and summary inodes
          - traversing filesystem ...
          - traversal finished ...
          - moving disconnected inodes to lost+found ...
  Phase 7 - verify and correct link counts...
  done
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ rm -f image0.img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[34]
  ファイルシステム管理(btrfs) - 01 (btrfs)
  
[内容]
  ## 作業内容
    ファイルシステム管理を行う
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
[確認]
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t btrfs /dev/loop0
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo btrfs filesystem show (ファイルシステムの情報を表示)
  
  コマンドの実行結果
  --------------------------------------------------
  Label: none  uuid: 7e377e0a-c234-44f5-a1c4-79424773a392
    Total devices 1 FS bytes used 112.00KiB
    devid    1 size 100.00MiB used 88.00MiB path /dev/loop0
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mount -o defaults -t btrfs /dev/loop0 /mnt
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo btrfs filesystem df /mnt (マウントしたファイルシステムの使用状況)
  
  コマンドの実行結果
  --------------------------------------------------
  Data, single: total=8.00MiB, used=0.00B
  System, DUP: total=8.00MiB, used=16.00KiB
  Metadata, DUP: total=32.00MiB, used=112.00KiB
  GlobalReserve, single: total=16.00MiB, used=0.00B
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo btrfs subvolume create /mnt/sub1 (サブボリューム作成)
  vm12$ sudo btrfs subvolume create /mnt/sub2 (サブボリューム作成)
  
  コマンドの実行結果
  --------------------------------------------------
  Create subvolume '/mnt/sub1'
  Create subvolume '/mnt/sub2'
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo btrfs subvolume list /mnt (作成したサブボリューム確認)
  
  コマンドの実行結果
  --------------------------------------------------
  ID 256 gen 7 top level 5 path sub1
  ID 257 gen 8 top level 5 path sub2
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo umount /mnt (予めトップレベルのボリュームをアンマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mount -o defaults,subvolid=256 -t btrfs /dev/loop0 /mnt/mp1 (サブボリュームを個別にマウント)
  vm12$ sudo mount -o defaults,subvolid=257 -t btrfs /dev/loop0 /mnt/mp2 (サブボリュームを個別にマウント)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ df -mT (lsblkだと/mnt/mp1が表示されない)
  
  コマンドの実行結果
  --------------------------------------------------
  ファイルシス                 タイプ   1M-ブロック  使用 使用可 使用% マウント位置
  devtmpfs                     devtmpfs         466     0    466    0% /dev
  tmpfs                        tmpfs            489     0    489    0% /dev/shm
  tmpfs                        tmpfs            489     7    482    2% /run
  tmpfs                        tmpfs            489     0    489    0% /sys/fs/cgroup
  /dev/mapper/centos_vm11-root xfs            17394  5412  11983   32% /
  /dev/vda1                    xfs             1014   188    827   19% /boot
  tmpfs                        tmpfs             98     0     98    0% /run/user/1000
  /dev/loop0                   btrfs            100    17     19   47% /mnt/mp1 (サブボリューム)
  /dev/loop0                   btrfs            100    17     19   47% /mnt/mp2 (サブボリューム)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo umount /mnt/mp1
  vm12$ sudo umount /mnt/mp2
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ rm -f image0.img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[35]
  ファイルシステム管理(btrfs) - 02 (btrfs-convert)
  
[内容]
  ## 作業内容
    ファイルシステム管理を行う
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
[確認]
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=image0.img bs=10M count=10
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 image0.img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t ext4 -b 4096 /dev/loop0
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> ブロックサイズが4096未満の場合、後の「btrfs」への変換時にエラー出力
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo btrfs-convert /dev/loop0 (ext4 -> btrfs)
  
  コマンドの実行結果
  --------------------------------------------------
  create btrfs filesystem:
    blocksize: 4096
    nodesize:  16384
    features:  extref, skinny-metadata (default)
  creating ext2 image file
  creating btrfs metadatacopy inodes [o] [         2/        11]
  conversion complete
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mount -o defaults -t btrfs /dev/loop0 /mnt
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ df -mT
  
  コマンドの実行結果
  --------------------------------------------------
  ファイルシス                 タイプ   1M-ブロック  使用 使用可 使用% マウント位置
  devtmpfs                     devtmpfs         466     0    466    0% /dev
  tmpfs                        tmpfs            489     0    489    0% /dev/shm
  tmpfs                        tmpfs            489     7    482    2% /run
  tmpfs                        tmpfs            489     0    489    0% /sys/fs/cgroup
  tmpfs                        tmpfs             98     0     98    0% /run/user/1000
  /dev/mapper/centos_vm11-root xfs            17394  5413  11982   32% /
  /dev/vda1                    xfs             1014   188    827   19% /boot
  /dev/loop0                   btrfs            100    24     56   30% /mnt (マウントしたデバイス)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo umount /mnt
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ rm -f image0.img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
[36]
  オートマウント
  
[内容]
  ## 作業内容
    ディレクトリ「/mnt/auto/dir0」に移動時にデバイス「/dev/loop0」を自動マウントする
    ディレクトリ「/mnt/auto/dir1」に移動時にデバイス「/dev/loop1」を自動マウントする
  
[確認]
  vm12$ cd $HOME
  vm12$ sudo yum -y install autofs (パッケージ追加)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ dd if=/dev/zero of=loop0.img bs=10M count=10
  vm12$ dd if=/dev/zero of=loop1.img bs=10M count=10
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup /dev/loop0 loop0.img
  vm12$ sudo losetup /dev/loop1 loop1.img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo mkfs -t ext4 /dev/loop0
  vm12$ sudo mkfs -t ext4 /dev/loop1
  
  コマンドの実行結果
  --------------------------------------------------
  (省略)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo vi /etc/auto.master (設定ファイルの修正)
  
  コマンドの実行結果
  --------------------------------------------------
  /misc /etc/auto.misc
  /net  -hosts
  +dir:/etc/auto.master.d
  +auto.master
  /mnt/auto /etc/auto.dir  // 追加 -> ディレクトリ「/mnt/auto」移動時に設定ファイル「/etc/auto.dir」の内容でマウント
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo vi /etc/auto.dir (設定ファイルの追加)
  
  コマンドの実行結果
  --------------------------------------------------
  dir0  -fstype=ext4,rw  :/dev/loop0
  dir1  -fstype=ext4,rw  :/dev/loop1
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo systemctl restart autofs
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ lsblk (オートマウント前を確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
  sr0                      11:0    1 1024M  0 rom  
  loop0                     7:0    0  100M  0 loop (追加したデバイス)
  loop1                     7:1    0  100M  0 loop (追加したデバイス)
  vda                     252:0    0   20G  0 disk 
  ├─vda2                252:2    0   19G  0 part 
  │ ├─centos_vm11-swap 253:1    0    2G  0 lvm  [SWAP]
  │ └─centos_vm11-root 253:0    0   17G  0 lvm  /
  └─vda1                252:1    0    1G  0 part /boot
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ cd /mnt/auto/dir0 (ディレクトリ移動)
  vm12$ cd /mnt/auto/dir1 (ディレクトリ移動)
  
  コマンドの実行結果
  --------------------------------------------------
  [61117.673405] EXT4-fs (loop0): mounted filesystem with ordered data mode. Opts: (null)
  [61148.795227] EXT4-fs (loop1): mounted filesystem with ordered data mode. Opts: (null)
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ lsblk (オートマウント後を確認)
  
  コマンドの実行結果
  --------------------------------------------------
  NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
  sr0                      11:0    1 1024M  0 rom  
  loop0                     7:0    0  100M  0 loop /mnt/auto/dir0 (オートマウント)
  loop1                     7:1    0  100M  0 loop /mnt/auto/dir1 (オートマウント)
  vda                     252:0    0   20G  0 disk 
  ├─vda2                252:2    0   19G  0 part 
  │ ├─centos_vm11-swap 253:1    0    2G  0 lvm  [SWAP]
  │ └─centos_vm11-root 253:0    0   17G  0 lvm  /
  └─vda1                252:1    0    1G  0 part /boot
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo umount /mnt/auto/dir0
  vm12$ sudo umount /mnt/auto/dir1
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo losetup -D
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ rm -f loop[0-1].img
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo vi /etc/auto.master (設定ファイル編集)
  
  コマンドの実行結果
  --------------------------------------------------
  /misc /etc/auto.misc
  /net  -hosts
  +dir:/etc/auto.master.d
  +auto.master
  # /mnt/auto /etc/auto.dir  // コメントアウト
  --------------------------------------------------
  
  vm12$ cd /etc
  vm12$ sudo rm auto.dir (追加した設定ファイル削除)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo systemctl restart autofs (サービス再起動)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> 出力なし
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
