================================================================================
[01] DHCP
================================================================================
[01]
  DHCP
  
[内容]
  ## 作業内容
    DHCPサーバー構築とDHCPクライアントによるIPアドレス取得
  
  ## 使用マシン
    HOST : vm12
    IPV4 : 192.168.122.12
    MEMO : 仮想マシン
  
  ## 使用マシン
    HOST : vm13
    IPV4 : 192.168.122.13
    MEMO : 仮想マシン
  
  ## コマンド(dhclient)
    dhclient -d  // フォアグラウンド処理
    dhclient -r  //
    dhclient -H  //

[確認]
  vm12$ cd $HOME
  vm12$ sudo yum -y install dhcp (パッケージ追加)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo vi /etc/dhcp/dhcp.conf (設定ファイルの修正)
  
  コマンドの実行結果
  --------------------------------------------------
  ## ネットワーク 192.168.122.0/24
  subnet 192.168.122.0 netmask 255.255.255.0 {
    option routers 192.168.122.1;              // ルーター
    option subnet-mask 255.255.255.0;          // サブネットマスク
    option domain-name "example.com";          // ドメイン名
    option domain-name-servers 192.168.122.1;  // DNSサーバー
    range 192.168.122.100 192.168.122.150;     // IPアドレス - リース範囲
    default-lease-time 21600;                  // IPアドレス - リース期間(秒)
    max-lease-time 43200;                      // IPアドレス - 最大期間(秒)

    ## ホスト(vm13)
    host vm13 {
      hardware ethernet 52:54:00:05:4e:7c;  // MACアドレス
      fixed-address 192.168.122.51;         // 固定IPアドレスを付与
    }
  }
  --------------------------------------------------
  
  vm12$ cd $HOME
  vm12$ sudo systemctl start dhcpd (サービスの起動)
  
  コマンドの実行結果
  --------------------------------------------------
  //
  --------------------------------------------------
    
    vm13$ cd $HOME
    vm13$ ip addr show (DHCPクライアント実行前)
    
    コマンドの実行結果
    --------------------------------------------------
    //
    --------------------------------------------------
    
    vm13$ cd $HOME
    vm13$ dhclient -d -H vm12 eth0 (DHCPクライアントによるIPアドレス取得)
    
    コマンドの実行結果
    --------------------------------------------------
    //
    --------------------------------------------------
    
    vm13$ cd $HOME
    vm13$ ip addr show (DHCPクライアント実行後)
    
    コマンドの実行結果
    --------------------------------------------------
    //
    --------------------------------------------------
    
  vm12$ cd $HOME
  vm12$ sudo systemctl stop dhcpd (サービスの停止)
  
  コマンドの実行結果
  --------------------------------------------------
  //
  --------------------------------------------------
  
  vm12$ cd /usr/local/src/apr-1.7.0
  vm12$ sudo ./configure --prefix=/usr/local/apr-1.7.0 (Makefile生成)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm12$ cd /usr/local/src/apr-1.7.0
  vm12$ sudo make (ビルド実行)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  vm12$ cd /usr/local/src/apr-1.7.0
  vm12$ sudo make install (インストール実行)
  
  コマンドの実行結果
  --------------------------------------------------
  (省略) -> エラー出力が無ければOK
  --------------------------------------------------
  
  以下の確認に続く
  
================================================================================
